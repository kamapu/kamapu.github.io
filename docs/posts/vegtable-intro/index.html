<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Miguel Alvarez: Introduction to the package vegtable</title>

<meta property="description" itemprop="description" content="The package vegtable offers objects and functions for the work with plot&#10;observations in vegetation assessments (phytosociological relevés).&#10;This object class ensures consistency on data, while it is also allowing&#10;flexibility in the degree of completeness and resolution of data.&#10;This tutorial is an updated version of a workshop offered in the context of&#10;the 16th Workshop of the German Group on Vegetation Databases celebrated in&#10;Freiburg in March 2017."/>

<link rel="canonical" href="https://kamapu.github.io/posts/vegtable-intro/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-10-30"/>
<meta property="article:created" itemprop="dateCreated" content="2020-10-30"/>
<meta name="article:author" content="Miguel Alvarez"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Miguel Alvarez: Introduction to the package vegtable"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="The package vegtable offers objects and functions for the work with plot&#10;observations in vegetation assessments (phytosociological relevés).&#10;This object class ensures consistency on data, while it is also allowing&#10;flexibility in the degree of completeness and resolution of data.&#10;This tutorial is an updated version of a workshop offered in the context of&#10;the 16th Workshop of the German Group on Vegetation Databases celebrated in&#10;Freiburg in March 2017."/>
<meta property="og:url" content="https://kamapu.github.io/posts/vegtable-intro/"/>
<meta property="og:image" content="https://kamapu.github.io/posts/vegtable-intro/images/Juice_table.png"/>
<meta property="og:image:width" content="1050"/>
<meta property="og:image:height" content="824"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Miguel Alvarez"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Miguel Alvarez: Introduction to the package vegtable"/>
<meta property="twitter:description" content="The package vegtable offers objects and functions for the work with plot&#10;observations in vegetation assessments (phytosociological relevés).&#10;This object class ensures consistency on data, while it is also allowing&#10;flexibility in the degree of completeness and resolution of data.&#10;This tutorial is an updated version of a workshop offered in the context of&#10;the 16th Workshop of the German Group on Vegetation Databases celebrated in&#10;Freiburg in March 2017."/>
<meta property="twitter:url" content="https://kamapu.github.io/posts/vegtable-intro/"/>
<meta property="twitter:image" content="https://kamapu.github.io/posts/vegtable-intro/images/Juice_table.png"/>
<meta property="twitter:image:width" content="1050"/>
<meta property="twitter:image:height" content="824"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","draft","categories","preview","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Introduction to the package vegtable"]},{"type":"character","attributes":{},"value":["The package vegtable offers objects and functions for the work with plot\nobservations in vegetation assessments (phytosociological relevés).\nThis object class ensures consistency on data, while it is also allowing\nflexibility in the degree of completeness and resolution of data.\nThis tutorial is an updated version of a workshop offered in the context of\nthe 16th Workshop of the German Group on Vegetation Databases celebrated in\nFreiburg in March 2017."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Miguel Alvarez"]},{"type":"character","attributes":{},"value":["https://kamapu.github.io/"]},{"type":"character","attributes":{},"value":["0000-0003-1500-1834"]}]}]},{"type":"character","attributes":{},"value":["10-30-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["R","vegetation","workshop"]},{"type":"character","attributes":{},"value":["images/Juice_table.png"]},{"type":"character","attributes":{},"value":["https://kamapu.github.io/posts/vegtable-intro/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["images/CombinedLogos.png","images/Juice_header.png","images/Juice_table.png","images/Turboveg_Data.png","vegtable-intro_files/anchor-4.2.2/anchor.min.js","vegtable-intro_files/bowser-1.9.3/bowser.min.js","vegtable-intro_files/distill-2.2.21/template.v2.js","vegtable-intro_files/header-attrs-2.14/header-attrs.js","vegtable-intro_files/jquery-3.6.0/jquery-3.6.0.js","vegtable-intro_files/jquery-3.6.0/jquery-3.6.0.min.js","vegtable-intro_files/jquery-3.6.0/jquery-3.6.0.min.map","vegtable-intro_files/popper-2.6.0/popper.min.js","vegtable-intro_files/tippy-6.2.7/tippy-bundle.umd.min.js","vegtable-intro_files/tippy-6.2.7/tippy-light-border.css","vegtable-intro_files/tippy-6.2.7/tippy.css","vegtable-intro_files/tippy-6.2.7/tippy.umd.min.js","vegtable-intro_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
        var fn = $(this).children()[0]
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
  <script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
  <script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<style type="text/css">
.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: rgb(8, 50, 67);
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

.distill-site-header {
}

/*Footer style*/
.distill-site-footer {
	background-color: rgb(8, 50, 67);
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

/*Logo size and position*/
.distill-site-header .logo img {
    max-height:42px;
    width: auto;
    margin-bottom: -15px;
  }

/*Use similar settings for images in navigation bar*/
.distill-site-header .nav-image img {
	opacity: 0.85;
    max-height: 25px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }

</style>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Introduction to the package vegtable","description":"The package vegtable offers objects and functions for the work with plot\nobservations in vegetation assessments (phytosociological relevés).\nThis object class ensures consistency on data, while it is also allowing\nflexibility in the degree of completeness and resolution of data.\nThis tutorial is an updated version of a workshop offered in the context of\nthe 16th Workshop of the German Group on Vegetation Databases celebrated in\nFreiburg in March 2017.","authors":[{"author":"Miguel Alvarez","authorURL":"https://kamapu.github.io/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0003-1500-1834"}],"publishedDate":"2020-10-30T00:00:00.000+01:00","citationText":"Alvarez, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<span class="logo">
<img src="../../images/logo_miguel.png"/>
</span>
<a href="../../index.html" class="title">Miguel Alvarez</a>
<a href="../../research.html">Research</a>
<a href="../../rpackages.html">R Packages</a>
<a href="../../databases.html">Databases</a>
<a href="../../blog.html">Posts</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="https://www.ipe.uni-bonn.de/pflanzenernaehrung/mitarbeiter/m_alvarez" class="nav-image">
<img src="../../images/art_ubonn_w.png"/>
</a>
<a href="https://www.researchgate.net/profile/Miguel_Alvarez18" class="nav-image">
<img src="../../images/art_researchgate_w.png"/>
</a>
<a href="https://scholar.google.de/citations?user=z29UaXQAAAAJ&amp;hl=en" class="nav-image">
<img src="../../images/art_gscholar_w.png"/>
</a>
<a href="https://www.github.com/kamapu" class="nav-image">
<img src="../../images/art_github_w.png"/>
</a>
<a href="https://gitlab.com/kamapu1" class="nav-image">
<img src="../../images/art_gitlab_w.png"/>
</a>
<a href="https://gis.stackexchange.com/users/80385/migue-lo?tab=profile" class="nav-image">
<img src="../../images/art_stack_w.png"/>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Introduction to the package vegtable</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../blog.html#category:R" class="dt-tag">R</a>
  <a href="../../blog.html#category:vegetation" class="dt-tag">vegetation</a>
  <a href="../../blog.html#category:workshop" class="dt-tag">workshop</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>The package vegtable offers objects and functions for the work
with plot observations in vegetation assessments (phytosociological
relevés). This object class ensures consistency on data, while it is
also allowing flexibility in the degree of completeness and resolution
of data. This tutorial is an updated version of a workshop offered in
the context of the 16th Workshop of the German Group on Vegetation
Databases celebrated in Freiburg in March 2017.</p></p>
</div>

<div class="d-byline">
  Miguel Alvarez <a href="https://kamapu.github.io/"
class="uri">https://kamapu.github.io/</a> 
  
<br/>10-30-2020
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#first-steps">First Steps</a>
<ul>
<li><a href="#installation-of-requirements-in-r">Installation of
requirements in R</a></li>
<li><a href="#documents-and-data-sets">Documents and data sets</a></li>
</ul></li>
<li><a href="#introduction-to-taxlist">Introduction to taxlist</a>
<ul>
<li><a href="#building-taxlist-objects">Building taxlist objects</a>
<ul>
<li><a href="#using-character-vectors">Using character vectors</a></li>
<li><a href="#using-formatted-tables">Using formatted tables</a></li>
<li><a href="#using-turboveg-species-list">Using Turboveg species
list</a></li>
</ul></li>
<li><a href="#summary-displays">Summary displays</a></li>
<li><a href="#example-data-set">Example data set</a></li>
<li><a href="#access-to-slots">Access to slots</a></li>
<li><a href="#subsets">Subsets</a></li>
<li><a href="#parent-child-relationships">Parent-child
relationships</a></li>
</ul></li>
<li><a href="#introduction-to-vegtable">Introduction to vegtable</a>
<ul>
<li><a href="#building-vegtable-objects">Building vegtable
objects</a></li>
<li><a href="#example-data-set-1">Example data set</a></li>
<li><a href="#access-to-slots-1">Access to slots</a></li>
<li><a href="#subsets-1">Subsets</a></li>
<li><a href="#cross-tables">Cross tables</a></li>
</ul></li>
<li><a href="#import-from-turboveg">Import from Turboveg</a></li>
<li><a href="#export-to-juice">Export to Juice</a></li>
<li><a href="#map-in-leaflet">Map in leaflet</a>
<ul>
<li><a href="#updated-on">Updated on</a></li>
<li><a href="#aknowledgements">Aknowledgements</a></li>
</ul></li>
</ul>
</nav>
</div>
<p>The program of the workshop is accessible <a
href="https://www.hswt.de/fileadmin/user_upload/Book_of_Abstracts_16th_Workshop_Vegetation_Databases_and_Natura_2000_Freiburg_9-10_March_2017.pdf">here</a>.</p>
<h1 id="first-steps">First Steps</h1>
<p>This session deals with the management and process of taxonomic lists
and retrieving information from vegetation-plot databases. Following
software will be required for this session:</p>
<ul>
<li><a href="https://www.r-project.org/">R</a></li>
<li><a href="https://www.rstudio.com/">RStudio</a></li>
<li><a
href="https://www.synbiosys.alterra.nl/turboveg/">Turboveg</a></li>
<li><a href="http://www.sci.muni.cz/botany/juice/">Juice</a></li>
<li><a href="https://www.google.com/earth/">Google Earth</a></li>
</ul>
<h2 id="installation-of-requirements-in-r">Installation of requirements
in R</h2>
<p>Though all required R-packages will be installed in the computer room
previous to this session, here there are instructions, in the case you
try to repeat the sessions in your own computer. Following command line
should be executed in order to install all required packages in
<code>R</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"devtools"</span>, <span class='st'>"foreign"</span>, <span class='st'>"plotKML"</span>, <span class='st'>"rgdal"</span>, <span class='st'>"sp"</span>, <span class='st'>"vegdata"</span>,
  <span class='st'>"vegan"</span>, <span class='st'>"xlsx"</span><span class='op'>)</span>, dependencies<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This session will focus on the use of two packages that use <a
href="https://github.com/"><strong>GitHub</strong></a> as repository for
sharing and development. The package <a
href="https://github.com/ropensci/taxlist"><code>taxlist</code></a>
processes taxonomic lists that may be connected to biodiversity
information (e.g. vegetation relevés), while the package <a
href="https://github.com/kamapu/vegtable"><code>vegtable</code></a> has
a similar task but handling vegetation-plot records. Since
<code>vegtable</code> is depending on <code>taxlist</code>, both
packages should be installed and updated for this session:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://remotes.r-lib.org'>remotes</a></span><span class='op'>)</span>
<span class='fu'><a href='https://remotes.r-lib.org/reference/install_github.html'>install_github</a></span><span class='op'>(</span><span class='st'>"ropensci/taxlist"</span>, build_vignettes<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://remotes.r-lib.org/reference/install_github.html'>install_github</a></span><span class='op'>(</span><span class='st'>"kamapu/vegtable"</span>, build_vignettes<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Since both package are been uploaded in the Comprehensive R Archive
Network (CRAN), you can also use the common way to get the last released
version.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"vegtable"</span>, dependencies<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="documents-and-data-sets">Documents and data sets</h2>
<p>This is the main document of the Workshop and will be distributed
among its participants. Additionally, data sets required for the
examples are provided by the installation of the R-packages
<code>taxlist</code> and <code>vegtable</code>.</p>
<h1 id="introduction-to-taxlist">Introduction to taxlist</h1>
<p>The package <code>taxlist</code> define an homonymous <code>S4</code>
class. Among other properties, <code>S4</code> classes implement a
formal definition of objects, tests for their validation and functions
(methods) applied to them. Such properties are suitable for structure
information of taxonomic lists and for data handling.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://cran.r-project.org/package=taxlist'>taxlist</a></span><span class='op'>)</span>
<span class='fu'>showClass</span><span class='op'>(</span><span class='st'>"taxlist"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This class is composed by four slots, corresponding to
column-oriented tables (class <code>data.frame</code> in
<strong>R</strong>). While the slots <code>taxonNames</code> and
<code>taxonRelations</code> contain the information on names (labels of
taxon concepts) and taxon concepts, respectively, representing the core
information of taxonomic lists.</p>
<p>most important information regarding taxa (taxon concepts),
information in slots <code>taxonTraits</code> and
<code>taxonViews</code> is optional and they can be empty.</p>
<h2 id="building-taxlist-objects">Building taxlist objects</h2>
<p>Building <code>taxlist</code> objects can be achieved either through
a step-by-step routine working with small building blocks or by
importing consolidated data sets.</p>
<h3 id="using-character-vectors">Using character vectors</h3>
<p>Objects of class <code>taxlist</code> can be just built from a list
of names formatted as a character vector. To achieve it, the functions
<code>new</code> and <code>add_concept</code> are required.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>plants</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lactuca sativa"</span>,<span class='st'>"Solanum tuberosum"</span>,<span class='st'>"Triticum sativum"</span><span class='op'>)</span>
<span class='va'>splist</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>"taxlist"</span><span class='op'>)</span>
<span class='va'>splist</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/taxon_relations.html'>add_concept</a></span><span class='op'>(</span><span class='va'>splist</span>, <span class='va'>plants</span><span class='op'>)</span>
<span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>splist</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="using-formatted-tables">Using formatted tables</h3>
<p>In the case of consolidated species lists, they can be inserted in a
table previously formatted for <code>taxlist</code> (or
<strong>Turboveg</strong>). Such tables can include both, accepted names
for plant species as well as their respective synonyms. A formatted
table is installed in the package <code>taxlist</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>File</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>path.package</a></span><span class='op'>(</span><span class='st'>"taxlist"</span><span class='op'>)</span>, <span class='st'>"cyperus"</span>, <span class='st'>"names.csv"</span><span class='op'>)</span>
<span class='va'>Cyperus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='va'>File</span>, stringsAsFactors<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>Cyperus</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This table was originally imported form <strong>Turboveg</strong> and
inherits some of its default columns. Four columns were renamed and are
mandatory for process the table with the function
<code>df2taxlist</code>:</p>
<ul>
<li><code>TaxonUsageID</code> is the key field of a table of names (slot
<code>taxonNames</code>).</li>
<li><code>TaxonConceptID</code> is the link of the name to its
respective concept (key field in slot <code>taxonRelations</code>.</li>
<li><code>TaxonName</code> is the name itself as character.</li>
<li><code>AuthorName</code> is a character value indicating the
author(s) of the respective name.</li>
</ul>
<p>Additionally the functions require a logical vector indicating, which
of those names should be considered as synonyms or accepted names for
its respective concept. This information is provided by the inverse
value of the column <code>SYNONYM</code> in
<strong>Turboveg</strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Cyperus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/df2taxlist.html'>df2taxlist</a></span><span class='op'>(</span><span class='va'>Cyperus</span>, <span class='op'>!</span><span class='va'>Cyperus</span><span class='op'>$</span><span class='va'>SYNONYM</span><span class='op'>)</span>
<span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Cyperus</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>object size: 32.1 Kb 
validation of &#39;taxlist&#39; object: TRUE 

number of taxon usage names: 95 
number of taxon concepts: 42 
trait entries: 0 
number of trait variables: 0 
taxon views: 0 </code></pre>
</div>
<h3 id="using-turboveg-species-list">Using Turboveg species list</h3>
<p>A direct import from a <strong>Turboveg</strong> database can be done
using the function <code>tv2taxlist</code>. The installation of
<code>vegtable</code> includes data published by <strong>Fujiwara et
al. (2014)</strong> with vegetation plots collected in forest stands
from Kenya.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/kamapu/vegtable'>vegtable</a></span><span class='op'>)</span>
<span class='va'>tv_home</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>path.package</a></span><span class='op'>(</span><span class='st'>"vegtable"</span><span class='op'>)</span>, <span class='st'>"tv_data"</span><span class='op'>)</span>
<span class='va'>Fujiwara</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/tv2taxlist.html'>tv2taxlist</a></span><span class='op'>(</span><span class='st'>"Fujiwara_sp"</span>, <span class='va'>tv_home</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Fujiwara</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="summary-displays">Summary displays</h2>
<p>For <code>taxlist</code> objects there are basically two ways for
displaying summaries. The first way is just ot apply the function
<code>summary</code> to a <code>taxlist</code> object:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Cyperus</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>object size: 32.1 Kb 
validation of &#39;taxlist&#39; object: TRUE 

number of taxon usage names: 95 
number of taxon concepts: 42 
trait entries: 0 
number of trait variables: 0 
taxon views: 0 </code></pre>
</div>
<p>Note that this option also executes a validity check of the object,
as done by the function <code>validObject</code>.</p>
<p>The second way is getting information on a particular concept by
adding it concept ID or a taxon usage name as second argument in the
function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Cyperus</span>, <span class='st'>"Cyperus dives"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>------------------------------ 
concept ID: 197 
view ID: none 
level: none 
parent: none 

# accepted name: 
197 Cyperus dives Delile 

# synonyms (5): 
52000 Cyperus immensus C.B. Clarke 
52600 Cyperus exaltatus var. dives (Delile) C.B. Clarke 
52601 Cyperus alopecuroides var. dives Boeckeler 
52602 Cyperus immensus var. petherickii (C.B. Clarke) Kük. 
52603 Cyperus petherickii C.B. Clarke 
------------------------------</code></pre>
</div>
<p>Specific information for several concepts can be displayed by using a
vector with several concept IDs. Through the option
<code>ConceptID="all"</code> it is also possible to get a display of the
first concepts, depending on the value of the argument
<code>maxsum</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Cyperus</span>, <span class='st'>"all"</span>, maxsum<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="example-data-set">Example data set</h2>
<p>The installation of <code>taxlist</code> includes the data
<code>Easplist</code>, which is formatted as a <code>taxlist</code>
object. This data is a subset of the species list used by the database
<strong>SWEA-Dataveg</strong> (<a
href="http://www.givd.info/ID/AF-00-006" title="SWEA-Dataveg">GIVD ID
AF-006</a>):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>Easplist</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Easplist</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="access-to-slots">Access to slots</h2>
<p>The common ways to access to the content of slots in <code>S4</code>
objects are either using the function <code>slot(object, name)</code> or
the symbol <code>@</code> (i.e. <code>object@name</code>). Additional
functions, which are specific for <code>taxlist</code> objects are
<code>taxon_names</code>, <code>taxon_relations</code>,
<code>taxon_traits</code> and <code>taxon_views</code> (see the help
documentation).</p>
<p>Additionally, it is possible to use the methods <code>$</code> and
<code>[</code> , the first for access to information in the slot
<code>taxonTraits</code>, while the second can be also used for other
slots in the object.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>Easplist</span><span class='op'>$</span><span class='va'>life_form</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  acropleustophyte        chamaephyte     climbing_plant facultative_annual 
                 8                 25                 25                 20 
   obligate_annual       phanerophyte   pleustohelophyte         reed_plant 
               114                 26                  8                 14 
     reptant_plant      tussock_plant               NA&#39;s 
                19                 52               3576 </code></pre>
</div>
<h2 id="subsets">Subsets</h2>
<p>Methods for the function <code>subset</code> are implemented in order
to generate subsets of the content of <code>taxlist</code> objects. Such
subsets usually apply pattern matching (for character vectors) or
logical operations and are analogous to query building in relational
databases. The <code>subset</code> method can be apply to any slot by
setting the value of the argument <code>slot</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Papyrus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Easplist</span>, <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span><span class='op'>(</span><span class='st'>"papyrus"</span>, <span class='va'>TaxonName</span><span class='op'>)</span>, slot<span class='op'>=</span><span class='st'>"names"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Papyrus</span>, <span class='st'>"all"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Or the very same results:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Papyrus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Easplist</span>, <span class='va'>TaxonConceptID</span> <span class='op'>==</span> <span class='fl'>206</span>, slot<span class='op'>=</span><span class='st'>"relations"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Papyrus</span>, <span class='st'>"all"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Similarly, you can look for a specific name.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Phraaus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Easplist</span>, <span class='fu'><a href='https://rdrr.io/r/base/charmatch.html'>charmatch</a></span><span class='op'>(</span><span class='st'>"Phragmites australis"</span>, <span class='va'>TaxonName</span><span class='op'>)</span>,
  slot<span class='op'>=</span><span class='st'>"names"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Phraaus</span>, <span class='st'>"all"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="parent-child-relationships">Parent-child relationships</h2>
<p>Objects belonging to the class <code>taxlist</code> can optionally
content parent-child relationships and taxonomic levels. Such
information is also included in the data <code>Easplist</code>, as shown
in the summary output.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Easplist</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>object size: 761.4 Kb 
validation of &#39;taxlist&#39; object: TRUE 

number of taxon usage names: 5393 
number of taxon concepts: 3887 
trait entries: 311 
number of trait variables: 1 
taxon views: 3 

concepts with parents: 3698 
concepts with children: 1343 

hierarchical levels: form &lt; variety &lt; subspecies &lt; species &lt; complex &lt; genus &lt; family 
number of concepts in level form: 2
number of concepts in level variety: 95
number of concepts in level subspecies: 71
number of concepts in level species: 2521
number of concepts in level complex: 1
number of concepts in level genus: 1011
number of concepts in level family: 186</code></pre>
</div>
<p>Note that such information can get lost once applied
<code>subset</code>, since the respective parents or children from the
original data set are not anymore in the subset. May you like to recover
parents and children, you can use the functions <code>get_paretns</code>
or <code>get_children</code>, respectively.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Papyrus</span>, <span class='st'>"all"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>------------------------------ 
concept ID: 206 
view ID: 1 
level: species 
parent: none 

# accepted name: 
206 Cyperus papyrus L. 

# synonyms (2): 
52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. 
52613 Cyperus papyrus ssp. nyassicus Chiov. 
------------------------------</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Papyrus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/taxlist/reference/get_children.html'>get_parents</a></span><span class='op'>(</span><span class='va'>Easplist</span>, <span class='va'>Papyrus</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Papyrus</span>, <span class='st'>"all"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>------------------------------ 
concept ID: 206 
view ID: 1 
level: species 
parent: 54853 Cyperus L. 

# accepted name: 
206 Cyperus papyrus L. 

# synonyms (2): 
52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. 
52613 Cyperus papyrus ssp. nyassicus Chiov. 
------------------------------ 
concept ID: 54853 
view ID: 2 
level: genus 
parent: 55959 Cyperaceae Juss. 

# accepted name: 
54855 Cyperus L. 
------------------------------ 
concept ID: 55959 
view ID: 3 
level: family 
parent: none 

# accepted name: 
55961 Cyperaceae Juss. 
------------------------------</code></pre>
</div>
<h1 id="introduction-to-vegtable">Introduction to vegtable</h1>
<p>Objects of class <code>vegtable</code> are complex objects attempting
to handle the most important information contained in vegetation-plot
databases. They are defined in the homonymous package, while the species
list will be required as a <code>taxlist</code> object.</p>
<p>As already mentioned, <code>S4</code> objects are composed by
slots:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/kamapu/vegtable'>vegtable</a></span><span class='op'>)</span>
<span class='fu'>showClass</span><span class='op'>(</span><span class='st'>"vegtable"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The information contained in the slot is the following:</p>
<ul>
<li><code>description</code> is containing the “metadata” of the
database as a named character vector.</li>
<li><code>samples</code> is a column oriented table with the
observations of species (as usage IDs) in plots and layers.</li>
<li><code>header</code> is a table containing information on the
plots.</li>
<li><code>species</code> is the taxonmic list as <code>taxlist</code>
object.</li>
<li><code>relations</code> are tables linked to categorical variables in
slot <code>header</code> (called <code>popups</code> in
<strong>Turboveg</strong>).</li>
<li><code>coverconvert</code> is a list with conversion tables among
cover scales.</li>
</ul>
<h2 id="building-vegtable-objects">Building vegtable objects</h2>
<p>An empty object (prototype) can be generated by using the function
<code>new</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Veg</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>"vegtable"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>It is also possible to build an object from cross tables, assuming
all species included in the table are accepted names:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>File</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>path.package</a></span><span class='op'>(</span><span class='st'>"vegtable"</span><span class='op'>)</span>, <span class='st'>"Fujiwara_2014"</span>, <span class='st'>"samples.csv"</span><span class='op'>)</span>
<span class='va'>Fujiwara</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='va'>File</span>, check.names<span class='op'>=</span><span class='cn'>FALSE</span>, stringsAsFactors<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>Fujiwara_veg</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/df2vegtable.html'>df2vegtable</a></span><span class='op'>(</span><span class='va'>Fujiwara</span>, <span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Fujiwara_veg</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="example-data-set-1">Example data set</h2>
<p>The package <code>vegtable</code> also provides own data sets as
examples. One of those examples is <code>dune_veg</code>, which contains
the data sets <code>dune</code> and <code>dune.env</code> from the
package <code>vegan</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>dune_veg</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>dune_veg</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Other example is <code>Kenya_veg</code>, which also represent a
subset of the database <strong>SWEA-Dataveg</strong> (<a
href="http://www.givd.info/ID/AF-00-006" title="SWEA-Dataveg">GIVD ID
AF-00-006</a>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>Kenya_veg</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Kenya_veg</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>## Metadata 
   db_name: Sweadataveg
   sp_list: Easplist
   dictionary: Swea
   object size: 9501 Kb 
   validity: TRUE 

## Content 
   number of plots: 1946 
   plots with records: 1946 
   variables in header: 34 
   number of relations: 3 

## Taxonomic List 
   taxon names: 3164 
   taxon concepts: 2392 
   validity: TRUE </code></pre>
</div>
<p>As shown in the previous commands, the function <code>summary</code>
displays a general overview of the object’s content, while it also runs
a validity check. An additional display is offered by the function
<code>vegtable_stat</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/vegtable_stat.html'>vegtable_stat</a></span><span class='op'>(</span><span class='va'>Kenya_veg</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>## Metadata 
   db_name: Sweadataveg
   sp_list: Easplist
   dictionary: Swea
   object size: 9501 Kb 
   validity: TRUE 

## Content 
   number of plots: 1946 
   plots with records: 1946 
   variables in header: 34 
   number of relations: 3 

## Taxonomic List 
   taxon names: 3164 
   taxon concepts: 2392 
   validity: TRUE 

REFERENCES 
Primary references: 5

## AREA 
Area range (m^2): 150 - 1750
&lt;1 m^2: 0%
1-&lt;10 m^2: 0%
10-&lt;100 m^2: 0%
100-&lt;1000 m^2: 2%
1000-&lt;10000 m^2: 1%
&gt;=10000 m^2: 0%
unknow: 97%

## TIME 
oldest: 1983 - youngest: 2014
&lt;=1919: 0%
1920-1929: 0%
1930-1939: 0%
1940-1949: 0%
1950-1959: 0%
1960-1969: 0%
1970-1979: 0%
1980-1989: 36%
1990-1999: 31%
2000-2009: 2%
2010-2019: 1%
unknow: 30%

## DISTRIBUTION 
KE: 100%

## PERFORMANCE 
01: 83%
02: 17%
03: 0%
04: 0%
05: 0%
06: 0%
07: 0%
08: 0%
09: 0%
10: 0%
11: 0%
12: 0%</code></pre>
</div>
<h2 id="access-to-slots-1">Access to slots</h2>
<p>Some functions are provided for the access to slots of
<code>vegtable</code> objects, namely <code>header</code> and
<code>veg_relation</code>, <code>taxon_traits</code> and
<code>taxon_views</code> (see the help documentation).</p>
<p>For a direct access of the content included in slot
<code>header</code>, there are the methods <code>$</code> and
<code>[</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Kenya_veg</span><span class='op'>$</span><span class='va'>REFERENCE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/veg_relation.html'>veg_relation</a></span><span class='op'>(</span><span class='va'>Kenya_veg</span>, <span class='st'>"REFERENCE"</span><span class='op'>)</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h2 id="subsets-1">Subsets</h2>
<p>As a way to generate queries from <code>vegtable</code> objects, a
method for the function <code>subset</code> is implemented as well.
Following is the case of the data set <code>dune_veg</code> generating a
subset with pasture plots.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>dune_veg</span><span class='op'>)</span>
<span class='va'>pasture</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>dune_veg</span>, <span class='va'>Use</span> <span class='op'>==</span> <span class='st'>"Pasture"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>dune_veg</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>## Metadata 
   object size: 22.2 Kb 
   validity: TRUE 

## Content 
   number of plots: 20 
   plots with records: 20 
   variables in header: 6 
   number of relations: 0 

## Taxonomic List 
   taxon names: 30 
   taxon concepts: 30 
   validity: TRUE </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>pasture</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>## Metadata 
   object size: 19.4 Kb 
   validity: TRUE 

## Content 
   number of plots: 5 
   plots with records: 5 
   variables in header: 6 
   number of relations: 0 

## Taxonomic List 
   taxon names: 30 
   taxon concepts: 30 
   validity: TRUE </code></pre>
</div>
<h2 id="cross-tables">Cross tables</h2>
<p>Most of the applications dealing with analysis of vegetation tables
(e.g. the package <code>vegan</code>) will deal with cross tables rather
than with column-oriented database lists. Therefore a function
<code>crosstable</code> is defined for the conversion of
<code>taxlist</code> objects to cross tables. Before building a cross
table it will be recommended to transform the cover into percentage
value by using the function <code>transform</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pasture</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/cover_trans.html'>cover_trans</a></span><span class='op'>(</span><span class='va'>pasture</span>, to<span class='op'>=</span><span class='st'>"Cover"</span>, rule<span class='op'>=</span><span class='st'>"middle"</span><span class='op'>)</span>

<span class='va'>Cross</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/crosstable.html'>crosstable</a></span><span class='op'>(</span><span class='va'>Cover</span> <span class='op'>~</span> <span class='va'>ReleveID</span> <span class='op'>+</span> <span class='va'>AcceptedName</span>, <span class='va'>pasture</span>, <span class='va'>max</span>,
  na_to_zero<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>Cross</span>
</code></pre>
</div>
</div>
<p>The first argument in the function is the formula
<code>y ~ x1 + x2 + ... + xn</code>, where:</p>
<ul>
<li><code>y</code> is the cover value (a column in slot
<code>samples</code>).</li>
<li><code>x1</code> is the plot ID or a grouping value from slot
<code>header</code> which will be used as columns in the cross
table.</li>
<li><code>x2</code> is the output for species (either
<code>TaxonName</code> or <code>AcceptedName</code>).</li>
<li><code>x3</code> to <code>xn</code> are additional information for
the rows, such as layer, etc.</li>
</ul>
<p>The second argument is the <code>vegtable</code> object and the third
is a function, which will be applied in the case of multiple values in a
cell (e.g. multiple records of a species within a plot).</p>
<p>Note that there is also a method dealing with class
<code>data.frame</code> (see the help documentation).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dune_veg</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/cover_trans.html'>cover_trans</a></span><span class='op'>(</span><span class='va'>dune_veg</span>, to<span class='op'>=</span><span class='st'>"Cover"</span>, rule<span class='op'>=</span><span class='st'>"middle"</span><span class='op'>)</span>

<span class='va'>Cross_use</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/crosstable.html'>crosstable</a></span><span class='op'>(</span><span class='va'>Cover</span> <span class='op'>~</span> <span class='va'>Use</span> <span class='op'>+</span> <span class='va'>AcceptedName</span>, <span class='va'>dune_veg</span>, <span class='va'>sum</span>,
  na_to_zero<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>Cross_use</span>
</code></pre>
</div>
</div>
<p>While the previous commands show statistics of groups in a vegetation
table, it is also possible to write a presence-absence table:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Cross_pa</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/crosstable.html'>crosstable</a></span><span class='op'>(</span><span class='va'>Cover</span> <span class='op'>~</span> <span class='va'>ReleveID</span> <span class='op'>+</span> <span class='va'>AcceptedName</span>, <span class='va'>pasture</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fl'>1</span>,
  na_to_zero<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>Cross_pa</span>
</code></pre>
</div>
</div>
<h1 id="import-from-turboveg">Import from Turboveg</h1>
<p>The original task of <code>vegtable</code> was the import of
<strong>Turboveg</strong> databases in R. Thus one of the oldest
functions in the package is <code>tv2vegtable</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tv_home</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>path.package</a></span><span class='op'>(</span><span class='st'>"vegtable"</span><span class='op'>)</span>, <span class='st'>"tv_data"</span><span class='op'>)</span>
<span class='va'>Fujiwara</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/tv2vegtable.html'>tv2vegtable</a></span><span class='op'>(</span><span class='st'>"Fujiwara_2014"</span>, <span class='va'>tv_home</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>zero values will be replaced by NAs </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>Fujiwara</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>## Metadata 
   db_name: Fujiwara_2014
   sp_list: Fujiwara_sp
   dictionary: Swea
   object size: 392.8 Kb 
   validity: TRUE 

## Content 
   number of plots: 56 
   plots with records: 56 
   variables in header: 29 
   number of relations: 2 

## Taxonomic List 
   taxon names: 301 
   taxon concepts: 254 
   validity: TRUE </code></pre>
</div>
<figure>
<img src="images/Turboveg_Data.png"
alt="Screenshot of Kenyan data set displayed in Turboveg" />
<figcaption aria-hidden="true">Screenshot of Kenyan data set displayed
in <strong>Turboveg</strong></figcaption>
</figure>
<p>In the case there is an error message produced by inconsistent data
structure, there is the possibility of importing the data as a list for
further inspection.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Fujiwara_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/tv2vegtable.html'>tv2vegtable</a></span><span class='op'>(</span><span class='st'>"Fujiwara_2014"</span>, <span class='va'>tv_home</span>, output<span class='op'>=</span><span class='st'>"list"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="export-to-juice">Export to Juice</h1>
<p>Export of data for <strong>Juice</strong> follows a similar procedure
as for cross tables.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/vegtable/man/write_juice.html'>write_juice</a></span><span class='op'>(</span><span class='va'>Fujiwara</span>, <span class='st'>"RiftValley"</span>,
  <span class='va'>COVER_CODE</span> <span class='op'>~</span> <span class='va'>ReleveID</span> <span class='op'>+</span> <span class='va'>AcceptedName</span> <span class='op'>+</span> <span class='va'>LAYER</span>,
  header<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"TABLE_NR"</span>,<span class='st'>"NR_IN_TAB"</span>,<span class='st'>"ALTITUDE"</span>,<span class='st'>"INCLINATIO"</span>,<span class='st'>"EXPOSITION"</span>,
    <span class='st'>"COMM_TYPE"</span><span class='op'>)</span>,
  FUN<span class='op'>=</span><span class='va'>paste0</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Besides the <code>vegtable</code> object, the most important elements
to export are:</p>
<ul>
<li><code>formula</code> indicating how to construct the cross
table.</li>
<li><code>header</code> to show which variables should be exported for
the head data.</li>
<li><code>coords</code> with the names of coordinates, if present.</li>
<li><code>FUN</code> the function used for aggregate multiple
records.</li>
</ul>
<p>The values for <code>coords</code> should be as decimal degrees and
in the spatial system <strong>WGS 84</strong>. In Juice such information
will be included in the header data as columns <strong>deg_lon</strong>
and <strong>deg_lat</strong>, allowing the display of plots in
<strong>Google Earth</strong>. The previous command has generated two
files, namely <strong>RiftValley_table.txt</strong> and
<strong>RiftValley_header.txt</strong>.</p>
<p>For importing the table, you may follow the steps:</p>
<ul>
<li>Open <strong>Juice</strong></li>
<li>In menu
<code>File -&gt; Import -&gt; Table -&gt; From Spreadsheet File (e.g. EXCEL Table)</code></li>
<li>Browse to <strong>RiftValley_table.txt</strong> and
<code>Open</code></li>
<li>In the last step, select the option
<code>Braun-Blanquet Codes</code> and <code>Finish</code></li>
<li>Finally, save the new file</li>
</ul>
<figure>
<img src="images/Juice_table.png"
alt="The Kenyan data set displayed in Juice" />
<figcaption aria-hidden="true">The Kenyan data set displayed in
<strong>Juice</strong></figcaption>
</figure>
<p>Now for the head:</p>
<ul>
<li>In menu
<code>File -&gt; Import -&gt; Header Data -&gt; From Comma Delimited File</code></li>
<li>Browse to <strong>RiftValley_header.txt</strong> and
<code>Open</code></li>
</ul>
<figure>
<img src="images/Juice_header.png"
alt="Display of header data in Juice" />
<figcaption aria-hidden="true">Display of header data in
<strong>Juice</strong></figcaption>
</figure>
<h1 id="map-in-leaflet">Map in leaflet</h1>
<p>For geo-referenced plots, you can easily map the location of the
plots, for instance using the package <a
href="https://rstudio.github.io/leaflet/"><code>leaflet</code></a>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/leaflet/'>leaflet</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>Fujiwara</span><span class='op'>@</span><span class='va'>header</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/leaflet/man/leaflet-imports.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/leaflet/man/leaflet-imports.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span>lng<span class='op'>=</span><span class='op'>~</span><span class='va'>LONGITUDE</span>, lat<span class='op'>=</span><span class='op'>~</span><span class='va'>LATITUDE</span>, color<span class='op'>=</span><span class='st'>"red"</span>,
        opacity<span class='op'>=</span><span class='fl'>0.5</span>, radius<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-ed969cbb2dc94dd3cf67" style="width:100%;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ed969cbb2dc94dd3cf67">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[2.66669444,2.66633333,2.66644444,2.6685,2.66886111,2.66755556,2.2625,2.31486111,2.3055,2.30225,2.27111111,2.25341667,2.24425,2.30980556,2.30958333,2.30963889,2.28275,1.253,1.25377778,1.25325,1.25241667,1.24602778,1.2465,1.24652778,1.24669444,1.24766667,1.24830556,1.24413889,1.24486111,1.24577778,-1.24258333,-1.24169444,-1.23919444,-1.23758333,-1.23669444,-1.23861111,-1.23333333,-1.24202778,-1.24338889,-1.24166667,-1.23872222,-1.23872222,-1.24183333,-1.2365,-1.23980556,-1.24508333,-1.35791667,-1.23433333,-1.24325,-1.24525,-1.83527778,-1.83547222,-1.88091667,-1.87905556,-1.8355,-1.83858333],[36.94138889,36.94166667,36.94236111,36.94594444,36.94341667,36.94069444,37.93072222,37.97280556,37.96186111,37.95911111,37.92986111,37.934,37.93219444,37.99497222,37.97980556,38.00030556,37.95419444,37.29186111,37.29111111,37.29375,37.29533333,37.29166667,37.29077778,37.29083333,37.29338889,37.29475,37.29380556,37.29597222,37.29630556,37.29677778,36.83869444,36.83747222,36.82758333,36.82611111,36.82566667,36.82391667,36.81666667,36.83841667,36.83975,36.82530556,36.82786111,36.82786111,36.837,36.8275,36.82383333,36.84102778,36.71141667,36.82580556,36.83916667,36.84055556,35.80994444,35.80883333,35.85822222,35.84825,35.80863889,35.80969444],2,null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-1.88091667,2.66886111],"lng":[35.80863889,38.00030556]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Then, hopefully you enjoyed the session and did not get too much
error messages.</p>
<h2 class="appendix" id="updated-on">Updated on</h2>
<p>06-06-2022</p>
<h2 class="appendix" id="aknowledgements">Aknowledgements</h2>
<p>This workshop was supported by the project <a
href="https://www.wetlands-africa.de">GlobE-wetlands</a>.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fkamapu.github.io%2Fposts%2Fvegtable-intro%2F" aria-label="share on facebook">
        <i class="fab fa-facebook" aria-hidden="true"></i>
      </a>
      <a href="https://twitter.com/share?text=Introduction%20to%20the%20package%20vegtable&amp;url=https%3A%2F%2Fkamapu.github.io%2Fposts%2Fvegtable-intro%2F" aria-label="share on twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fkamapu.github.io%2Fposts%2Fvegtable-intro%2F&amp;title=Introduction%20to%20the%20package%20vegtable" aria-label="share on linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
    </span>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--radix_placeholder_navigation_after_body--><html><body>
<div class="distill-site-nav distill-site-footer">
<p><a href="../../impressum.html"> <b>Imprint</b> </a></p>
<!--
<a href="impressum.html">
  <b>Imprint</b>
</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="impressum.html">
  <b>Data Policy</b>
</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="impressum.html">
  <b>Disclaimer</b>
</a>
-->
<p>This page was created with
<a href="https://rstudio.github.io/distill/"><b>distill</b></a></p>
</div>
<!--/radix_placeholder_navigation_after_body-->
</body></html>


</body>

</html>
