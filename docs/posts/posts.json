[
  {
    "path": "posts/ea-wetlands/",
    "title": "Vegetation of East African wetlands - Assessment using R and vegtable",
    "description": "Example session of the work with vegetation-plot observations in R using the\npackage vegtable and a open accessible data set of more than 300 observations\ncollected from published references and field surveys. This tutorial explains\nhow to use the package vegtable to process data before starting statistical\nassessments. An additional task handled in this document is the use of\ntaxonomic information and further species' attributes (traits) for calculating\nstatistics at the plot level.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      },
      {
        "name": "Kai Behn",
        "url": {}
      }
    ],
    "date": "2022-07-21",
    "categories": [
      "R",
      "vegetation",
      "wetlands"
    ],
    "contents": "\n\nContents\nIntroduction\nRequired Packages\nData Set\nTaxonomic Lists\nHeader and Relations\nSamples\n\nCocktail Classification\nStatistics from Taxon\nTraits\nLife Forms and Origin\nTaxonomy\n\nExport Functions\nCross-table\nJuice table\nMap\nUpdated on\n\n\n\n\n\n\nStand of the Vigno vexillatae-Panicetum fluviicolae Behn,\nAlvarez, Mutebi & Becker 2022 in an undistrubed area within the\nKilombero floodplain, Tanzania (CC-BY-NC K. Behn).\nIntroduction\nThis document contains an example session of the work with plot\nobservations done in East African wetlands, mixing field surveys and\ndata collected from published references. This data was assessed in the\npublication by Behn et al.\n(2022) and is a\nmodified version of its Supplement S4 (Alvarez and Behn 2021).\nThis is an attempt to ensure reproducibility on the published\nstatistical results and promote collaborative data assessment. Note that\nwe use the term reproducibility in the sense of Cassey and Blackburn (2006) and Claerbout and Karrenbach (1992) but it\nmay have a different meaning (McArthur 2019; Plesser 2018).\nRequired Packages\nThe data set is formated using the package vegtable.\nTaxonomic information and species attributes are embedded into\nvegtable but using taxlist.\nFurthermore, bibliographic references are included by using the package\nbiblio.\nWe recommend to install all these packages from their development\nversions at GitHub.\n\n\nlibrary(package = \"devtools\")\ninstall_github(repo = \"ropensci/taxlist\", build_vignettes = TRUE)\ninstall_github(repo = \"kamapu/vegtable\")\ninstall_github(repo = \"kamapu/biblio\")\n\n\nTo reproduce the interactive map at the end of this tutorial, you\nwill need the package leaflet.\n\n\ninstall.packages(\"leaflet\")\n\n\nData Set\nTo run this session, you need to download the data by a click on this\nlink. Then copy and paste it into your working directory.\nAlternatively you may prefer to download a copy of the R-image using\nthe following command in your running session.\n\n\ndownload.file(url = \"https://zenodo.org/record/5111485/files/swea.rda?download=1\",\n    destfile = \"swea.rda\", method = \"curl\")\n\n\nThis data set was exported from the database\nSWEA-Dataveg, which is registered in the Global Index\nof Vegetation-Plot Databases (GIVD) as AF-00-006 (Alvarez, Curran, and Malombe 2021). To\noptimize the content of the object, the data was pre-processed, whereby\nthe most important changes regarding the original data are:\nRecorded sub-specific taxa (i.e. varieties and sub-species) have\nbeen merged with their respective species.\nRecorded supra-specific taxa (i.e. genera and families) have been\nskipped from the plot observations.\nUndetermined taxa are excluded.\nMultiple occurrence of a species in a plot have been merged\npreserving the maximum abundance value.\nCover values have been equalized to the Braun-Blanquet scale for all\nrecords, where classes + and r have\nbeen merged with class 1.\nTo start the work with the distributed data set, you need to load\nvegtable to your session.\n\n\nlibrary(package = vegtable)\nload(file = \"swea.rda\")\nsummary(object = swea)\n\n## Metadata \n   name: East African Wetlands\n   authors: K. Behn and M. Alvarez\n   year: 2021\n   object size: 419.3 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 325 \n   plots with records: 325 \n   variables in header: 12 \n   number of relations: 3 \n\n## Taxonomic List \n   taxon names: 1354 \n   taxon concepts: 601 \n   validity: TRUE \n\nTaxonomic Lists\nPlots observations contain records of species’ abundance in the\nrespective plots. In vegetation-plot databases, those records may be\ncollected from diverse sources and refer to different nomenclatures,\nthus a link between synonyms and accepted names to taxon concepts is\nrequired. Additionally, taxonomic ranks, parent-child relationships, and\nfunctional traits have to be considered for further ecological\nassessments. To deal with this, there is a slot called\nspecies including the taxonomic list in a\ntaxlist object.\n\n\nsummary(object = swea@species)\n\nobject size: 244.6 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 1354 \nnumber of taxon concepts: 601 \ntrait entries: 320 \nnumber of trait variables: 4 \ntaxon views: 6 \n\nconcepts with parents: 599 \nconcepts with children: 266 \n\nhierarchical levels: form < variety < subspecies < species < genus < family < phylum \nnumber of concepts in level form: 0\nnumber of concepts in level variety: 0\nnumber of concepts in level subspecies: 0\nnumber of concepts in level species: 335\nnumber of concepts in level genus: 202\nnumber of concepts in level family: 62\nnumber of concepts in level phylum: 2\n\nIn this taxonomic list you can also query for some species using its\nname (partial matchings are also allowed).\n\n\nsummary(object = swea@species, ConceptID = \"Cyclosorus interruptus\",\n    secundum = \"bibtexkey\")\n\n------------------------------ \nconcept ID: 50074 \nview ID: 1 - CJBGSANBI2012 \nlevel: species \nparent: 55055 Cyclosorus Link \n\n# accepted name: \n202792 Cyclosorus interruptus (Willd.) H. Itô \n\n# synonyms (13): \n22425 Thelypteris interrupta (Willd.) K. Iwats. \n28798 Aspidium gongylodes Schkuhr \n28802 Dryopteris gongylodes (Schkuhr) Kuntze \n28807 Pteris interrupta Willd. \n202793 Cyclosorus striatus Ching \n205463 Aspidium continuum Desv. \n205464 Aspidium ecklonii Kunze \n205465 Aspidium obtusatum Sw. \n205466 Aspidium pteroides (Retz.) Sw. \n205467 Aspidium serra (Sw.) Sw. \n205468 Aspidium serratum Sw. \n205469 Aspidium unitum (L.) Sw. \n205470 Nephrodium propinquum R. Br. \n------------------------------\n\nThis summary shows the ID of the taxon (taxon concept ID), the taxon\nview (reference used for the nomeclature), its taxonomic rank (level),\nthe parent taxon (the parent genus in this case), the accepted name and\na list of synonyms (both including usage name ID).\nYou can also use the function indented_list() to have an\noverview of the hierarchical structure including this taxon.\n\n\nindented_list(object = swea@species, filter = \"Cyclosorus\")\n\nPteridophyta NA\n Thelypteridaceae NA\n  Cyclosorus Link\n   Cyclosorus interruptus (Willd.) H. Itô \n\nFor more details on the structure of taxlist objects,\nsee Alvarez and Luebert\n(2018).\nHeader and Relations\nInformation related to plot observations (e.g. soil properties,\nslope, exposition, coordinates) is stored as a data.frame\nin the slot header. In this column-oriented table the\nvariable ReleveID represents the primary key.\n\n\nhead(x = swea@header)\n\n    ReleveID original_number record_date plot_size elevation\n157      259            <NA>  2012-04-25         4       348\n212      249            <NA>  2012-04-18         4       351\n213      246            <NA>  2012-04-18         4       333\n214      245            <NA>  2012-04-18         4       343\n215      250            <NA>  2012-04-18         4       351\n216      221            <NA>  2012-03-27         4       337\n    cover_total community_type height_total longitude  latitude\n157         100            397           NA  38.32523 -5.084125\n212         100            390           NA  38.32692 -5.076853\n213         100            390           NA  38.32741 -5.075487\n214         100            390           NA  38.32727 -5.075572\n215         100            390           NA  38.32692 -5.076853\n216          90            390           NA  38.32638 -5.077153\n    country_code data_source\n157          TZA           1\n212          TZA           1\n213          TZA           1\n214          TZA           1\n215          TZA           1\n216          TZA           1\n\nCategorical variables in header may need detailed\ndescriptions on their respective classes, if they are factorized. For\nthis purpose, a slot called relations contains the\nrespective data frames. Both the data frame in the slot\nrelations and the variable shared with slot\nheader have the same name.\n\n\nnames(x = swea@relations)\n\n[1] \"community_type\" \"country_code\"   \"data_source\"   \n\nFor instance the field country_code has a relation\nof the same name with an homonymous primary key. This field works then\nas a foreign key in slot header.\n\n\nhead(x = swea@relations$country_code)\n\n    country_code      name_short                        name_long\n17           KEN           Kenya                            Kenya\n20           TZA        Tanzania                         Tanzania\n33           COD Dem. Rep. Congo Democratic Republic of the Congo\n38           ZAF    South Africa                     South Africa\n82           ZMB          Zambia                           Zambia\n125          BDI         Burundi                          Burundi\n\nSamples\nThe core of plot observations is the record of taxa (usually plant\nspecies) indicating either their occurrence or their abundance in the\nrespective plots. Since vegtable objects emulate relational\ndatabases, this information is contained in column-oriented table, at\nthe slot samples.\n\n\nhead(x = swea@samples)\n\n   ReleveID TaxonUsageID cover_percentage cover_class\n15     3661          461                5           1\n16     3662          461                2           1\n17     3663          461                1           1\n18     3748          461                1           1\n19     3750          461                1           1\n21     3817          461                5           1\n\nIn this table, the variable ReleveID is pointing to\nthe plot observations in slot header, while the\nvariable TaxonUsageID is linked to the slot\nspecies. The later is rather a mention of the taxon\nusage name recorded in the plot, which will be recognized either as\nsynonym or accepted name of a taxon concept. The abundance of the\nspecies in plots (variable cover_class) corresponds to\nthe Braun-Blanquet scale with the classes “+” and “r” merged with “1”,\nas previously mentioned.\nCocktail Classification\nCocktail classification is a supervised classification method based\non logical algorithms. The main elements in these algorithms are the\ndefinition of species groups (cocktail groups) and dominant species. The\nalgorithms will recognize plot observations in a vegetation unit by the\noccurrence of more than a half of the members of a coctail group, the\nabsence of a group and whether a dominant species is present over a\ncut-level of abundance or not (Bruelheide 1997; Kočı́, Chytrý, and Tichý 2003).\nThe package vegtable defines an object class called\nshaker. This object will always depend on a\nvegtable object (companion). A shaker is\nincluded in the distributed image, which is called\nsyntax.\n\n\nsummary(object = syntax, companion = swea)\n\n\nThe design of cocktail algorithms is a time-consuming, iterative\nprocess and will not be explained here. We recommend to use the software\nJuice\nfor this purpose (Tichý 2002). The\nfunction make_cocktail() will execute the expert system and\nproduce the classification that can be inserted in the data set.\n\n\nswea@header <- make_cocktail(shaker = syntax, vegtable = swea, cover = \"cover_class\",\n    syntax = \"veg_unit\")\n\n\nFor every formula contained in syntax, a binary variable\nindicating whether a plot is belonging to a vegetation unit or not.\nAdditionally a column defined as veg_unit is inserted\nwith the name of the respective units. Note that in this column\nobservations that are not recognized in any vegetation unit get a\nNA value, while observation recognized in more than one\nunit get a + symbol.\n\n\nsummary(object = as.factor(x = swea$veg_unit))\n\n        + 01Isc-Fim 02Fui-Amm 03Cor-Pan 04Gra-Ipo 05Cen-Per 06Cyp-Cyp \n       36        11         8        17         8        12        59 \n07Cyp-Fui 08Mel-Lee 09Cyp-lat 10Cyp-Dry 11Phr-mau  12PhrEch 13Vig-Pan \n       42        19        25        50        22         5        11 \n\nStatistics from Taxon Traits\nLife Forms and Origin\nThe taxonomic list includes information on life forms and origin\n(native or introduced to sub-Saharan Africa). This information can be\nsummarized for every plot, for instance calculating the proportion of\nlife forms, weighted by the abundance. For it, we can use the function\ntrait_proportion(), which will aggregate proportions of\nsingle life form classes into plot observations. Since we like to\ncollect the information in the slot header with further\nplot properties, we will use the option in_header=TRUE.\n\n\nswea <- trait_proportion(trait = \"life_form\", object = swea, weight = \"cover_class\",\n    in_header = TRUE)\n\n# Boxplot\npar(las = 1, mar = c(4, 8, 1, 1))\nboxplot(formula = obligate_annual_prop ~ veg_unit, data = swea@header, horizontal = TRUE,\n    col = \"grey\", ylab = \"\", xlab = \"Proportion of Annual Plants\")\nabline(v = 0.5, lty = \"dashed\")\n\n\n\nNote that trait_proprotion() is designed to calculate\nproportions of categorical traits. Alternatively the function\ntrait_stats() is suitable for statistics of numerical\ntraits (e.g. calculation of weighted averages).\nTaxonomy\nTaxonomic information is not mandatory in taxonomic lists. In slot\nspecies of the object swea both, the\ntaxonomic ranks and the parent-child relationships are included.\n\n\nsummary(object = swea@species)\n\nobject size: 244.6 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 1354 \nnumber of taxon concepts: 601 \ntrait entries: 320 \nnumber of trait variables: 4 \ntaxon views: 6 \n\nconcepts with parents: 599 \nconcepts with children: 266 \n\nhierarchical levels: form < variety < subspecies < species < genus < family < phylum \nnumber of concepts in level form: 0\nnumber of concepts in level variety: 0\nnumber of concepts in level subspecies: 0\nnumber of concepts in level species: 335\nnumber of concepts in level genus: 202\nnumber of concepts in level family: 62\nnumber of concepts in level phylum: 2\n\nFor statistical assessments it is necessary to set taxonomic\ninformation as species traits. This can be managed with the function\ntax2traits().\n\n\nswea@species <- tax2traits(object = swea@species, get_names = TRUE)\nhead(x = swea@species@taxonTraits)\n\n   TaxonConceptID     life_form origin_ssa origin_source\n2           56944 tussock_plant     native             3\n4           56931 tussock_plant     native             3\n6           56768 tussock_plant     native             3\n8             249 tussock_plant     native             3\n9           54697 tussock_plant     native             3\n10          52150  annual_plant  adventive             3\n                  origin_remarks                 species     genus\n2                           <NA>    Anosporum pectinatum Anosporum\n4                           <NA>            Carex mannii     Carex\n6                           <NA>     Cyperus platycaulis   Cyperus\n8                           <NA>      Epilobium salignum Epilobium\n9                           <NA> Epilobium stereophyllum Epilobium\n10 Mexico to S. Tropical America    Erigeron sumatrensis  Erigeron\n       family        phylum\n2  Cyperaceae Magnoliophyta\n4  Cyperaceae Magnoliophyta\n6  Cyperaceae Magnoliophyta\n8  Onagraceae Magnoliophyta\n9  Onagraceae Magnoliophyta\n10 Compositae Magnoliophyta\n\nThe last function inserted new columns for taxonomic ranks indicating\nthe usage name of each taxon (without author name) and its respective\nparent taxa. In the next step we will calculate the frequency of species\nin each family.\n\n\n# Counting species per family\nFamilies <- count_taxa(object = species ~ family, data = swea@species)\n\n# Sorting families by frequency\nFamilies <- Families[order(Families$species_count, decreasing = TRUE), ]\n\n# Ploting the 20 most frequent families\npar(las = 2, mar = c(10, 5, 1, 1))\nwith(data = Families[1:20,], expr = barplot(species_count, names.arg = family,\n        ylab = \"Number of Species\"))\n\n\n\nTo see if there is some trend in the proportion of a family, for\ninstance Poaceae, we can use again the function\ntrait_proportion(). Herewith we will weight the proportion\nof families by the abundance of the respective species in the plot.\n\n\nswea <- trait_proportion(trait = \"family\", object = swea, weight = \"cover_class\",\n    in_header = TRUE)\n\n# Boxplot\npar(las = 1, mar = c(4, 8, 1, 1))\nboxplot(formula = Poaceae_prop ~ veg_unit, data = swea@header, horizontal = TRUE,\n    col = \"grey\", ylab = \"\", xlab = \"Proportion of Grasses\")\nabline(v = 0.5, lty = \"dashed\")\n\n\n\nExport Functions\nThe structure of vegtable objects is quite complex and\nsome assessments or displays will require a proper export method. Here\nwe introduce some of the basic ways to export information for further\nassessments. For instance, some of those functions will work on a subset\nof plots, which include the species Cyperus papyrus L.\n\n\ncype_pap <- subset(x = swea, subset = TaxonName == \"Cyperus papyrus\", slot = \"taxonNames\")\n\n\nIn the previous step only records for C. papyrus L. are\npreserved, thus we will use the plot observation ids to produce a subset\nwith full relevés.\n\n\ncype_pap <- subset(x = swea, subset = ReleveID %in% cype_pap$ReleveID, slot = \"header\")\n\n\nCross-table\nThe most common format for displaying vegetation data is the cross\ntable, with species as rows and plots as columns. To produce cross\ntables there is the function crosstable(). This function\nrequires a formula in the form abundance twidles species and\nplot (in the example,\ncover_class ~ ReleveID + AcceptedName) and a function to\nsummarize multiple occurrences of a species in a plot (e.g. the maximum\nvalue). Depending on the size of the data set, this process may require\nsome seconds.\n\n\nTable <- crosstable(formula = cover_class ~ ReleveID + AcceptedName, data = cype_pap,\n    FUN = max)\n\n\nNote that the terms ReleveID and\nAcceptedName are the key variables for the slot\nheader and the object taxlist in slot\nspecies, respectively.\nIt is also possible to insert additional columns besides the species\nlist, for instance to add the author name (AuthorName\nin taxlist) and the family, you need to add them as terms\nin the formula.\n\n\nTable <- crosstable(formula = cover_class ~ ReleveID + AcceptedName + AuthorName + family,\n    data = cype_pap, FUN = max, na_to_zero = TRUE)\n\n# First 5 rows and 10 columns\nTable[1:5, 1:10]\n\n           AcceptedName                     AuthorName      family\n1   Asystasia gangetica               (L.) T. Anderson Acanthaceae\n2 Hygrophila auriculata              (Schumach.) Heine Acanthaceae\n3    Hypoestes aristata (Vahl) Sol. ex Roem. & Schult. Acanthaceae\n4      Thunbergia alata                  Bojer ex Sims Acanthaceae\n5 Acanthus polystachyus                         Delile Acanthaceae\n  3698 3739 3882 4752 4945 4950 5256\n1    1    1    1    1    1    1    1\n2    0    0    0    0    0    0    0\n3    0    0    0    0    0    0    4\n4    0    0    0    0    0    0    0\n5    0    0    1    0    0    0    0\n\nSome statistical software and R-packages may need the first cross\ntable but transposed. This can be achieved by changing the formula in\nthe function.\n\n\nTable <- crosstable(formula = cover_class ~ AcceptedName + ReleveID, data = swea,\n    FUN = max, as_matrix = TRUE)\n\n\nJuice table\nThere is also a possibility to export the content of plot\nobservations to Juice.\nJuice is a freeware specialized in the analysis of vegetation-plot data\nsets and implement a series of statistical assessment methods. To\nproduce the data sets, there is the function write_juice(),\nwhich is working in a similar way as crosstable(). Here we\nneed additionally to specify which header variables will be exported and\nwhich are the geographical coordinates (assumed as decimal degrees in\nWGS84).\n\n\nwrite_juice(data = swea, file = \"swea\", formula = cover_class ~ ReleveID + AcceptedName, \n    db_name = swea@description$name,\n    header = c(\"country_code\", \"data_source\", \"record_date\", \"plot_size\", \"elevation\",\n        \"veg_unit\"),\n    coords = c(\"longitude\", \"latitude\"), FUN = max)\n\n\nThis command will produce two files in your working directory, the\nfile swea_table.txt with the cross table, and\nswea_header.txt with the information of plots (also\ncalled header table). To import those files to Juice, yo need to follow\nthese steps.\nMap\nThe plot observations included in this data set are geo-referenced,\nwhere the exactitude of the location is depending on the data source\n(some data are geo-referenced according to the study site description of\nthe respective publication).\nThe location of plot observations can be mapped by using the package\nleaflet.\n\n\nlibrary(package = leaflet)\nleaflet(data = swea@header, width = \"100%\") %>%\n    addProviderTiles(\"Esri.WorldImagery\") %>%\n  addMarkers(lng = ~longitude, lat = ~latitude, popup = ~paste(ReleveID),\n      clusterOptions = markerClusterOptions()) %>%\n    addMiniMap(width = 100, height = 100)\n\n\n\nUpdated on\n31-07-2022\n\n\n\nAlvarez, Miguel, and Kai Behn. 2021. “Introduction to the Work\nwith Shared Vegetation Data Using the r-Package Vegtable.”\nZenodo. https://doi.org/10.5281/ZENODO.5111478.\n\n\nAlvarez, Miguel, Michael Curran, and Itambo Malombe. 2021.\n“SWEA-Dataveg: A Vegetation Database for sub-Saharan Africa.” Vegetation\nClassification and Survey 2: 59–63. https://doi.org/10.3897/vcs/2021/64911.\n\n\nAlvarez, Miguel, and Federico Luebert. 2018. “The Taxlist Package:\nManaging Plant Taxonomic Lists in R.”\nBiodiversity Data Journal 6: e23635. https://doi.org/10.3897/bdj.6.e23635.\n\n\nBehn, Kai, Miguel Alvarez, Samuel Mutebi, and Mathias Becker. 2022.\n“Vegetation Diversity in East African Wetlands: Cocktail\nAlgorithms Supported by a Vegetation-Plot Database.”\nPhytocoenologia, July. https://doi.org/10.1127/phyto/2022/0392.\n\n\nBruelheide, Helge. 1997. “Using Formal Logic to Classify\nVegetation.” Folia Geobotanica Et Phytotaxonomica 32:\n41–46.\n\n\nCassey, Phillip, and Tim M. Blackburn. 2006. “Reproducibility and\nRepeatability in Ecology.” BioScience 56\n(12): 958. https://doi.org/10.1641/0006-3568(2006)56[958:rarie]2.0.co;2.\n\n\nClaerbout, Jon F., and Martin Karrenbach. 1992. “Electronic\nDocuments Give Reproducible Research a New Meaning.” In\nSEG Technical Program Expanded Abstracts 1992.\nSociety of Exploration Geophysicists. https://doi.org/10.1190/1.1822162.\n\n\nKočı́, Martin, Milan Chytrý, and Lubomı́r Tichý. 2003. “Formalized\nReproduction of an Expert-Based Phytosociological Classification: A Case\nStudy of Subalpine Tall-Forb Vegetation.” Journal of\nVegetation Science 14 (4): 601–10. https://doi.org/10.1111/j.1654-1103.2003.tb02187.x.\n\n\nMcArthur, Sally L. 2019. “Repeatability, Reproducibility, and\nReplicability: Tackling the 3r Challenge in Biointerface Science and\nEngineering.” Biointerphases 14 (2): 020201. https://doi.org/10.1116/1.5093621.\n\n\nPlesser, Hans E. 2018. “Reproducibility Vs. Replicability: A Brief\nHistory of a Confused Terminology.” Frontiers in\nNeuroinformatics 11 (January). https://doi.org/10.3389/fninf.2017.00076.\n\n\nTichý, Lubomír. 2002. “JUICE, Software for Vegetation\nClassification.” Journal of Vegetation Science 13 (3):\n451–53. https://doi.org/10.1111/j.1654-1103.2002.tb02069.x.\n\n\n\n\n",
    "preview": "posts/ea-wetlands/Vigno-Panicetum.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/vegetation-chile/",
    "title": "Syntaxonomic Classification of Chilean Vegetation",
    "description": "In a work published in the journal \"Vegetation Classification and Survey\",\nwe did a comparison between associations according to the Braun-Blanquet\napproach and plant formations according to the EcoVeg approach.\nThis classification was done on the basis of plots stored in the database\n\"sudamerica\". Here is the interactive flow diagram.",
    "author": [],
    "date": "2022-06-26",
    "categories": [
      "vegetation"
    ],
    "contents": "\n\n\n\n",
    "preview": "posts/vegetation-chile/images/sankey.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 2620,
    "preview_height": 3640
  },
  {
    "path": "posts/multivar/",
    "title": "Course on Multivariate Statistics an R",
    "description": "A course on the applications of multivariate statistics on vegetation ecology\nis scheduled for the period between the 16th and 23rd of November in\nNairobi.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2021-05-11",
    "categories": [
      "R",
      "vegetation"
    ],
    "contents": "\nBrief description here\nSee program here.\n\n\n\n",
    "preview": "posts/multivar/images/poster-course.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/vegtable-press-2/",
    "title": "Basics on the work with vegetation-plots in vegtable",
    "description": "The package vegtable was developed for the handling of data provided by\nvegetation-plot databases in single objects within R sessions.\nIn this package functions attempt to encapsulate process of complex data sets\nin brief command-lines during an R session and target to repeatability in the\nassessment of floristic information.\nHere we review through some examples the use of the most important functions\nimplemented in vegtable.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-11-20",
    "categories": [
      "R",
      "vegetation"
    ],
    "contents": "\n\nContents\nInstallation\nWorking with species\nlists only\nSummaries\n\nWorking with\nvegetation-plots\nStructure\nStatistics\nTrait proportions\nTrait Statistics\nStatistics from\ntaxonomic information\n\nCross tables and Maps\nUpdated on\nAcknowledgement\n\n\nInstallation\nBoth packages taxlist and\nvegtable\nare released in the Comprehensive R Archive Network\n(CRAN). Since taxlist is a dependency of\nvegtable, both will be installed in the following\ncommand:\n\n\ninstall.packages(\"vegtable\", dependencies = TRUE)\n\n\n\nAlternatively, you can install the development versions from their\nrepositories at GitHub.\n\n\nlibrary(devtools)\ninstall_github(\"ropensci/taxlist\", build_vignettes = TRUE)\ninstall_github(\"kamapu/vegtable\")\n\n\n\nAn additional package including some example data required for this\nsession have also to be installed from GitHub.\n\n\ninstall_github(\"kamapu/sanmartin1998\")\n\n\n\nWorking with species lists\nonly\nBefore starting with the work, do not forget to load the installed\npackages into your R-session:\n\n\nlibrary(vegtable)\nlibrary(sanmartin1998)\n\n\n\nIn this first section we focus on the taxlist objects,\nwhich are specialized for handling taxonomic lists. For more details on\nthe theory behind this package, see Alvarez and Luebert (2018).\nThe package taxlist includes a own data set called\nEasplist.\n\n\nEasplist\n\n\nobject size: 761.4 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 5393 \nnumber of taxon concepts: 3887 \ntrait entries: 311 \nnumber of trait variables: 1 \ntaxon views: 3 \n\nconcepts with parents: 3698 \nconcepts with children: 1343 \n\nhierarchical levels: form < variety < subspecies < species < complex < genus < family \nnumber of concepts in level form: 2\nnumber of concepts in level variety: 95\nnumber of concepts in level subspecies: 71\nnumber of concepts in level species: 2521\nnumber of concepts in level complex: 1\nnumber of concepts in level genus: 1011\nnumber of concepts in level family: 186\n\nThe information stored in a taxlist object is organized\nin four column-oriented tables following a relational model and\nallocated in own slots within the object. The access to the respective\nslots in R is done with the symbol @ or alternatively using\nthe function slot().\n\n\n\n\n\nhead(Easplist@taxonNames)\n\n\n  TaxonUsageID TaxonConceptID              TaxonName\n1            1              1 Abelmoschus esculentus\n2        52313              1    Hibiscus esculentus\n3            2              2       Abutilon indicum\n4            3              3   Abutilon mauritianum\n5        50361              3         Pavonia patens\n6            4              4   Acacia drepanolobium\n            AuthorName\n1          (L.) Moench\n2                   L.\n3                 (L.)\n4       (Jacq.) Medik.\n5     (Andrews) Chiov.\n6 Harms ex Y. Sjöstedt\n\nhead(Easplist@taxonRelations)\n\n\n  TaxonConceptID AcceptedName Basionym Parent   Level ViewID\n1              1            1       NA  54753 species      1\n2              2            2       NA  54754 species      1\n3              3            3       NA  54754 species      1\n4              4            4       NA  54755 species      1\n5              5            5       NA  54755 species      1\n6              6            6       NA  54755 species      1\n\nhead(Easplist@taxonTraits)\n\n\n  TaxonConceptID          life_form\n1              7       phanerophyte\n2              9       phanerophyte\n3             18 facultative_annual\n4             20 facultative_annual\n5             21    obligate_annual\n6             22        chamaephyte\n\nhead(Easplist@taxonViews)\n\n\n  ViewID                                 secundum view_bibtexkey\n1      1            African Plant Database (2012)  CJBGSANBI2012\n2      2 Taxonomic Name Resolution Service (2018)       TNRS2018\n3      3                    The Plant List (2013)        TPL2013\n\nSummaries\nThe function summary() can be used to query information\nof a taxon or a set of taxa.\n\n\nsummary(Easplist, ConceptID = \"Typha domingensis\", secundum = \"secundum\",\n    exact = TRUE)\n\n\n------------------------------ \nconcept ID: 50105 \nview ID: 1 - African Plant Database (2012) \nlevel: species \nparent: 55040 Typha L. \n\n# accepted name: \n50105 Typha domingensis Pers. \n\n# synonyms (9): \n51999 Typha australis Schumach. \n53124 Typha angustifolia ssp. australis (Schumach.) Graebn. \n53125 Typha aequalis Schnizl. \n53126 Typha angustata Bory & Chaub. \n53127 Typha angustifolia ssp. angustata (Bory & Chaub.) Briq. \n53128 Typha angustata var. abyssinica Graebn. \n53129 Typha angustata var. aethiopica Rohrb. \n53130 Typha aethiopica (Rohrb.) Kronfeldt \n53131 Typha schimperi Rohrb. \n------------------------------\n\nIn this command line the parameter ConceptID is used to\nquery a taxon name. The parameter secundum is set to the\nname of a column in slot taxonViews that will be\nappended to the taxon view ID, which may not be informative alone. The\nsetting exact = TRUE indicates that the queried name have\nto be a perfect match to the taxon usage names in the data set,\notherwise sub-specific taxa of the queried species may be also\nretrieved. The command retrieves the ID of the queried taxon, the ID of\nthe taxon view (for a\ndefinition see Alvarez\nand Luebert, 2018), the taxonomic rank, the ID and name of\nthe parent taxon (if suitable), the accepted name and a listing of\nsynonyms.\nNote in the display that the taxon concept ID and the ID of the\nparent refer to their taxon concept IDs, which is the primary key at\nslot taxonRelations, while the IDs in front of the\naccepted name and synonyms refer to the IDs of the respective taxon\nusage names, which is the primary key at slot\ntaxonNames.\nYou can also display an indented list with the following command.\n\n\nindented_list(Easplist, \"Typha\")\n\n\nTyphaceae \n Typha L.\n   Typha capensis (Rohrb.) N.E. Br.\n   Typha latifolia L.\n   Typha domingensis Pers. \n\nThe function print_name() can be used to format\nscientific names when writing rmarkdown documents. The\nfollowing example is adapted from the documentation of the function.\nNote in the example that the option style = \"expression\" is\nmeant to be used in plot devices.\n\n\n## Accepted name with author\nprint_name(Easplist, 363, style = \"expression\")\n\n\nexpression(italic(\"Ludwigia adscendens\") ~ \"ssp.\" ~ italic(\"diffusa\")~\"(Forssk.) P.H. Raven\")\n\n## Including taxon view\nprint_name(Easplist, 363, style = \"expression\", secundum = \"secundum\")\n\n\nexpression(italic(\"Ludwigia adscendens\") ~ \"ssp.\" ~ italic(\"diffusa\")~\"(Forssk.) P.H. Raven\"~\"sec. African Plant Database (2012)\")\n\n## Second mention in text\nprint_name(Easplist, 363, style = \"expression\", second_mention = TRUE)\n\n\nexpression(italic(\"L. adscendens\") ~ \"ssp.\" ~ italic(\"diffusa\")~\"(Forssk.) P.H. Raven\")\n\n## Using name ID\nprint_name(Easplist, 50037, style = \"expression\", concept = FALSE)\n\n\nexpression(italic(\"Ludwigia stolonifera\")~\"(Guill. & Perr.) P.H. Raven\")\n\n## Markdown style\nprint_name(Easplist, 363, style = \"markdown\")\n\n\n[1] \"*Ludwigia adscendens* ssp. *diffusa* (Forssk.) P.H. Raven\"\n\n## HTML style\nprint_name(Easplist, 363, style = \"html\")\n\n\n[1] \"<i>Ludwigia adscendens<\/i> ssp. <i>diffusa<\/i> (Forssk.) P.H. Raven\"\n\n## LaTeX style for knitr\nprint_name(Easplist, 363, style = \"knitr\")\n\n\n[1] \"\\\\textit{Ludwigia adscendens} ssp. \\\\textit{diffusa} (Forssk.) P.H. Raven\"\n\nWorking with\nvegetation-plots\nFurther examples will be applied to a data set available at the\ninstalled package sanmartin1998, which corresponds to plot\nobservations in grasslands and semi-aquatic communities from Temuco,\nChile. This data set was originally published by San Martín et al. (1998) and is\nstored in the database sudamerica (https://kamapu.github.io/sudamerica/, see also\nAlvarez et al.,\n2012).\n\n\nreleves\n\n\n## Metadata \n   db_name: sudamerica\n   description: Database for vegetation-plots from South America.\n   taxonomy: sam_splist\n   bibtexkey: NA\n   object size: 195.8 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 80 \n   plots with records: 80 \n   variables in header: 13 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 548 \n   taxon concepts: 199 \n   validity: TRUE \n\nStructure\nObjects of class vegtable are structured into 8 slots,\nwhere the slots species, header, and\nsamples are the essential ones.\n\n\n\nThe taxonomic list is handled as a taxlist object and is\nlocated at the slot species:\n\n\nsummary(releves@species)\n\n\nobject size: 98 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 548 \nnumber of taxon concepts: 199 \ntrait entries: 85 \nnumber of trait variables: 8 \ntaxon views: 10 \n\nconcepts with parents: 164 \nconcepts with children: 113 \n\nhierarchical levels: form < variety < subspecies < species < section < subgenus < genus < subfamily < family < phylum \nnumber of concepts in level form: 0\nnumber of concepts in level variety: 6\nnumber of concepts in level subspecies: 1\nnumber of concepts in level species: 86\nnumber of concepts in level section: 0\nnumber of concepts in level subgenus: 0\nnumber of concepts in level genus: 71\nnumber of concepts in level subfamily: 0\nnumber of concepts in level family: 35\nnumber of concepts in level phylum: 0\n\nThe slot header is simply a data frame including\ninformation related to single plot observations, for instance size of\nthe plot, record date, results of soil analyses, etc.\n\n\nhead(releves@header)\n\n\n    ReleveID table_number column_number plot_size plot_length\n445     6091            3             1        25          NA\n469     6115            3             2        25          NA\n470     6116            3            13        25          NA\n592     6234            2             8        25          NA\n593     6235            2            10        25          NA\n594     6236            2            11        25          NA\n    plot_width elevation community_type page_number    db_name\n445         NA       163            565         105 sudamerica\n469         NA       163            565         105 sudamerica\n470         NA       199            565         105 sudamerica\n592         NA       199            534         104 sudamerica\n593         NA        77            534         104 sudamerica\n594         NA       168            534         104 sudamerica\n    data_source longitude latitude\n445          29  -72.7201 -38.6727\n469          29  -72.7201 -38.6727\n470          29  -72.7341 -38.6310\n592          29  -72.7341 -38.6310\n593          29  -72.7440 -38.6846\n594          29  -72.6958 -38.7141\n\nRecords of species in plots are stored in slot\nsamples. Against the commonly used cross tables\n(species by plots or plots by species), this slot is organized in\ncolumns (column-oriented table, a.k.a database list).\n\n\nhead(releves@samples)\n\n\n      record_id ReleveID TaxonUsageID cover_percentage\n10575    138697     7285        20972             15.0\n10576    138698     7285        23744             60.0\n10577    138699     7285         9373             20.0\n10578    138700     7285       196060              0.5\n10579    138701     7285        35072              5.0\n10580    138702     7285         9953              0.5\n\nThe slot coverconvert have an own, homonymous class\nand is used as container for cover conversion tables. These tables can\nbe used for conversion of cover codes, which will be done by the\nfunction transform(). The example on releves does not\ninclude cover conversion tables but the data set installed with\nvegtable does it.\n\n\nsummary(Kenya_veg@coverconvert)\n\n\n## Number of cover scales: 3 \n\n* scale 'br_bl': \n  Levels    Range\n1      r    0 - 1\n2      +    0 - 1\n3      1    1 - 5\n4      2   5 - 25\n5      3  25 - 50\n6      4  50 - 75\n7      5 75 - 100\n\n* scale 'b_bbds': \n  Levels    Range\n1      r    0 - 1\n2      +    0 - 1\n3      1    1 - 5\n4     2m    1 - 5\n5     2a   5 - 15\n6     2b  15 - 25\n7      3  25 - 50\n8      4  50 - 75\n9      5 75 - 100\n\n* scale 'ordin.': \n  Levels    Range\n1      1    0 - 1\n2      2    0 - 1\n3      3    1 - 5\n4      4    1 - 5\n5      5   5 - 15\n6      6  15 - 25\n7      7  25 - 50\n8      8  50 - 75\n9      9 75 - 100\n\nThe slot relations is a list of data frames that\nprovide additional information for classes of categorical variables\nstored in slot header. These tables correspond to\npop-up tables of Turboveg 2.\n\n\nnames(releves@relations)\n\n\n[1] \"community_type\" \"data_source\"   \n\nhead(releves@relations$community_type)\n\n\n  community_type\n1            298\n2            305\n3            307\n4            310\n5            313\n6            315\n                                                       community_name\n1            Loudetia phragmitoides-Hyparrhenia bracteata-communities\n2                                             Loudetio-Fimbristyletum\n3                                            Euphorbieto-Portulacetum\n4                                 Amaranthus sp- Synedrella nodiflora\n5                               Pennisetum purpureum-Acalypha ciliata\n6 Sporobolus festivus-Hysanthes trichotoma (sous-association typique)\n\nWhile in the header table such categorical variables may be cryptic,\nthere is an option to insert columns from relations into header by using\nrelation2header(). By this way, yo do not only see a\ncommunity id, which is just a number, but you can also see the\nrespective names of the plant communities that correspond to the syntaxa\nassigned to the plots originally by the publication.\n\n\nreleves <- relation2header(releves, \"community_type\")\nhead(releves@header)\n\n\n    ReleveID table_number column_number plot_size plot_length\n445     6091            3             1        25          NA\n469     6115            3             2        25          NA\n470     6116            3            13        25          NA\n592     6234            2             8        25          NA\n593     6235            2            10        25          NA\n594     6236            2            11        25          NA\n    plot_width elevation community_type page_number    db_name\n445         NA       163            565         105 sudamerica\n469         NA       163            565         105 sudamerica\n470         NA       199            565         105 sudamerica\n592         NA       199            534         104 sudamerica\n593         NA        77            534         104 sudamerica\n594         NA       168            534         104 sudamerica\n    data_source longitude latitude\n445          29  -72.7201 -38.6727\n469          29  -72.7201 -38.6727\n470          29  -72.7341 -38.6310\n592          29  -72.7341 -38.6310\n593          29  -72.7440 -38.6846\n594          29  -72.6958 -38.7141\n                            community_name\n445 Mentho pulegium-Agrostietum capillaris\n469 Mentho pulegium-Agrostietum capillaris\n470 Mentho pulegium-Agrostietum capillaris\n592                       Juncetum proceri\n593                       Juncetum proceri\n594                       Juncetum proceri\n\nStatistics\nThe packages vegtable and taxlist are\nrather specialized on data manipulation than on data analysis.\nNevertheless some common descriptive statistics and summaries that can\nbe used for further statistical analyses are implemented.\nTrait proportions\nIn this data set, for instance, life forms are inserted as attributes\nof the recorded species. Since this attribute is a categorical variable,\nsummaries at the plot level can only be done as proportions. The\nfunction trait_proportion() is suitable for such kind of\nsummaries. Note that the best way to collect statistics calculated for\nplots is adding them as new columns into the slot\nheader, which is done by the option\nin_header=TRUE. Additionally, the option\nweight=\"cover_percentage\" is indicating that the cover\npercentage stored in the slot samples will be used as\nweight for the respective life from classes.\n\n\nreleves <- trait_proportion(trait=\"life_form\", object=releves,\n    head_var=\"ReleveID\", include_nas=FALSE, weight=\"cover_percentage\",\n    in_header=TRUE)\n\n\n\nBy default, the function added at slot header one\ncolumn per level in the traits variable appending a suffix (default\n_prop). Just to remind you, we used the function\nrelation2header() in order to add the names of the recorded\ncommunities in the slot header.\n\n\n# Add community names to the header table\nreleves <- relation2header(releves, relation=\"community_type\")\n\n# Display mean values per plant communities\naggregate(annual_prop ~ community_name, data=releves@header, FUN=mean)\n\n\n                                community_name annual_prop\n1                     Anthoxanthum utriculatum 0.007826989\n2                  Eleocharietum macrostachyae 0.096678841\n3                    Eleocharietum pachycarpae 0.092635324\n4        Eleocharis pachycarpa-Lythrum portula 0.173790650\n5                      Glycerietum multiflorae 0.000000000\n6  Gnaphalio cymatoidis-Polygonetum piperoidis 0.650889962\n7                             Juncetum proceri 0.001167405\n8             Junco proceri-Caricetum ripariae 0.000000000\n9   Ludwigia peploides-Sagittaria montevidense 0.000000000\n10      Mentho pulegium-Agrostietum capillaris 0.041020366\n11                             Phyla nodiflora 0.958893907\n\n# The same information as boxplot\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(annual_prop ~ community_name, data=releves@header, horizontal=TRUE,\n    xlab=\"Proportion of annuals\", ylab=\"\")\n\n\n\n\nBefore you continue, note that the first argument in the function is\na formula indicating on the left a response as left term\n(in this case the statistic describing a categorical trait variable) and\nthe factors as right terms (grouping variables for the plots). This kind\nof objects will be frequently used in functions dealing with\nvegtable objects.\nTrait Statistics\nFor numerical taxonomic traits statistical parameters such as\naverages and standard deviation can be calculated per plot. For instance\nthe data set releves is also including Ellenberg’s\nindicator values (see\nEllenberg et\nal., 2001), which were collected from Ramírez et al. (1991) and San Martín et al.\n(2003).\nThe calculation of trait statistics is done by the function\ntrait_stats(). In the parameter FUN we can use\na statistical function such as mean() but we can also\ndefine an statistic using the cover values as weights for the\ncalculation. In this case we can calculate weighted means:\n\\[\\bar{x} = \\frac{\\sum{x_{i} \\cdot\nw_{i}}}{\\sum{w_{i}}}\\]\nHere \\(\\bar{x}\\) is the mean\nindicator figure for a plot, \\(x_{i}\\)\nis the indicator value of the ith species in this plot, and\n\\(w_{i}\\) is the weight of the same\nspecies (cover value) in the plot. In R we define it as a function:\n\n\nweighted_mean <- function(x, w, ...) sum(x*w, ...)/sum(w, ...)\n\n\n\nIn the function trait_stats() we can query indicator\nfigures through a formula. Note that this formula may include multiple\nvariables on the left terms for the simultaneous calculation of\nindicator values.\n\n\nreleves <- trait_stats(ind_n + ind_h ~ ReleveID, releves,\n    FUN=weighted_mean,  include_nas=FALSE, weight=\"cover_percentage\",\n    suffix=\"_wmean\", in_header=TRUE)\n\n\n\nThe resulting values may be useful to compare different plant\ncommunities or to test relationships between different variables, for\ninstance an expected correlation between the humidity indicator and the\nproportion of annuals.\n\n\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(ind_h_wmean ~ community_name, data=releves@header, horizontal=TRUE,\n    xlab=\"H figure (weighted mean)\", ylab=\"\")\n\n\n\n\n\n\n# Linear regression model\nMod <- lm(annual_prop ~ ind_h_wmean, data=releves@header)\n\n# plot\nplot(releves@header[,c(\"ind_h_wmean\", \"annual_prop\")], xlab=\"H figure\",\n    ylab=\"Proportion of annuals\", pch=20, col=\"darkgrey\")\nabline(Mod, lty=2, col=\"red\")\n\n\n\n\nWell, it is not a nice distribution of observations but still\nsuggesting a negative tendency in the proportion of annuals by\nincreasing humidity indicator, as expected.\nStatistics from taxonomic\ninformation\nTaxonomic information (taxonomic ranks and parent-child\nrelationships) are not directly available for statistical descriptions\nin taxlist objects. If we need to calculate proportions of\ndetermined genera or families in the plots, we can pass the taxonomy to\nthe taxon traits table with the function tax2traits(). You\nneed to set get_names=TRUE, otherwise only taxon IDs\n(numbers) will be inserted in the traits table.\n\n\nreleves@species <- tax2traits(releves@species, get_names=TRUE)\nhead(releves@species@taxonTraits)\n\n\n   TaxonConceptID origin_status life_form ind_l ind_t ind_r ind_n\n2           57184        native perennial    NA    NA    NA    NA\n10          57504        native perennial     6     5     4     3\n17          58062        native perennial    NA    NA    NA    NA\n41          61842          <NA>      <NA>     8     6     5     7\n43          61852          <NA>      <NA>     6     7    NA     8\n44          61853     adventive perennial     8     5     5     5\n   ind_h ind_s variety subspecies                species\n2     NA    NA    <NA>       <NA>      Adesmia corymbosa\n10     6    NA    <NA>       <NA>      Dichondra sericea\n17    NA    NA    <NA>       <NA>     Setaria parviflora\n41    12    NA    <NA>       <NA>  Callitriche palustris\n43     5    NA    <NA>       <NA> Echinochloa crus-galli\n44     5    NA    <NA>       <NA>  Arrhenatherum elatius\n           genus         family\n2        Adesmia    Leguminosae\n10     Dichondra Convolvulaceae\n17       Setaria        Poaceae\n41   Callitriche Plantaginaceae\n43   Echinochloa        Poaceae\n44 Arrhenatherum        Poaceae\n\nNow we can compare, for instance, the proportion of species belonging\nto the family Poaceae (grasses) in the different plant communities.\n\n\nreleves <- trait_proportion(\"family\", releves, head_var=\"ReleveID\",\n    trait_level=\"Poaceae\", include_nas=FALSE, weight=\"cover_percentage\",\n    in_header=TRUE)\n\n# Compare communities by proportion of Poaceae\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(Poaceae_prop ~ community_name, data=releves@header,\n    horizontal=TRUE, xlab=\"Proportion of Poaceae\", ylab=\"\")\n\n\n\n\nThis graphic is advising us that maybe few of these communities can\nbe considered as grasslands sensu stricto.\nThe function count_taxa() is defined for calculation of\nnumber of taxa at specific taxonomic ranks. Note that this function may\nbe smart enough to aggregate taxa into the corresponding ranks, for\ninstance the calculation of species numbers may also include\nsub-specific taxa in their respective species (option\ninclude_lower=TRUE).\n\n\nreleves <- count_taxa(species ~ ReleveID, releves, include_lower=TRUE,\n    in_header=TRUE)\n\n# Compare communities by species richness\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(species_count ~ community_name, data=releves@header,\n    horizontal=TRUE, xlab=\"Species richness\", ylab=\"\")\n\n\n\n\nCross tables and Maps\nMost of the applications used for floristic comparisons require data\nin form of a cross table. Furthermore, species composition of\ncommunities may be more evident by displaying data, for instance, in a\ntable of species by plots. To arrange data in such a way we can apply\nthe function crosstable().\nIn order to reduce the data set, we will apply the function\nsubset(), selecting plots of the association Juncetum\nproceri.\n\n\njuncetum <- subset(releves, community_name == \"Juncetum proceri\",\n    slot=\"header\")\nsummary(juncetum)\n\n\n## Metadata \n   db_name: sudamerica\n   description: Database for vegetation-plots from South America.\n   taxonomy: sam_splist\n   bibtexkey: NA\n   object size: 217.2 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 15 \n   plots with records: 15 \n   variables in header: 20 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 548 \n   taxon concepts: 199 \n   validity: TRUE \n\nIn the function crosstable() we indicate as formula in\nthe left term the numeric variable used to fill the table, the first\nright term is the group variable used for the columns and the further\nright terms are group variables defining the rows of the cross table.\nNote that the taxa in the formula can be addressed by either one of two\nkeywords, namely TaxonName for the use of original\nentry names (taxon usage names) or AcceptedName for use\nof the respective names considered as accepted in slot species. We also\nset the arguments FUN=max defining the function used to\nmerge multiple occurrences of a taxon in a plot and\nna_to_zero=TRUE to fill absence.\n\n\njuncetum_cross <- crosstable(cover_percentage ~ ReleveID + AcceptedName,\n    data=juncetum, FUN=max, na_to_zero=TRUE)\nhead(juncetum_cross)\n\n\n                         AcceptedName 6236 6237 6239 7285 7423 7643\n1    Adesmia corymbosa var. corymbosa  0.5  0.5  0.5   10  0.5  0.5\n2                 Agrostis capillaris 10.0 30.0  0.0   15 40.0 20.0\n3            Anthoxanthum utriculatum  0.0  0.0  0.0    0  0.0  0.0\n4 Arrhenatherum elatius var. bulbosum  0.0  0.0  0.0    0  0.0  0.0\n5                Baccharis sagittalis  0.0  0.0  0.0    0  0.0  0.0\n6               Centipeda elatinoides  0.0  0.5  0.0    0  0.0  0.5\n  6234 6235 6238 6588 6589 6804 6805 7294 7303\n1    0  0.0  0.0    0    0  0.0    0    0    0\n2   50 20.0 40.0   10   30 20.0   50   20   50\n3    0  0.5  0.0    0    0  0.0    0    0    0\n4    0  0.5  0.0    0    0  0.0    0    0    0\n5    0  0.0  0.5    0    0  0.0    0    0    0\n6    0  0.0  0.0    0    0  0.5    0    0    0\n\nWhen plots are geo-referenced, you can show their locations using the\npackage leaflet.\n\n\nlibrary(leaflet)\nleaflet(releves@header) %>% addTiles() %>%\n    addCircleMarkers(lng=~longitude, lat=~latitude, color=\"red\",\n        opacity=0.3, radius=1)\n\n\n\n\nUpdated on\n24-06-2022\nAcknowledgement\nThe data sets and routines demonstrated here have been previously\ntested by Elena Gómez in the context of her thesis for the degree of\nMSc. (Gómez, 2020). Any\nfurther comments and suggestions are kindly welcomed.\n\n\n\nAlvarez, M. and Luebert, F. (2018) The taxlist package:\nManaging plant taxonomic lists in R. Biodiversity Data\nJournal 6, e23635. doi:10.3897/bdj.6.e23635.\n\n\nAlvarez, M., Möseler, B. M., Martín, C. S., Ramírez, C. and\nAmigo, J. (2012) CL-Dataveg  a\ndatabase of Chilean grassland vegetation. Biodiversity\n& Ecology 4, 443. doi:10.7809/b-e.00230.\n\n\nEllenberg, H., Weber, H. E., Düll, R., Wirth, V. and Werner,\nW. (2001) Zeigerwerte von pflanzen in mitteleuropa.\nGöttingen, Erich Goltze.\n\n\nGómez, E. (2020) Explorative and retrospective\nevaluation of grassland vegetation in Southcentral Chile.\n\n\nRamírez, C., Finot, V. L., San Martín, C. and Ellies,\nA. (1991) El valor indicador ecológico de las malezas del\ncentro-sur de Chile. Agro Sur 19,\n94–116.\n\n\nSan Martín, C., Ramírez, C. and Ojeda, P. (1998) La\nvegetación de lagunas primaverales en las cercanías de Temuco\n(Cautín, Chile). Acta Botanica Malacitana\n23, 99–120.\n\n\nSan Martín, C., Ramírez, C. and Alvarez, M. (2003)\nMacrófitos como bioindicadores: Una propuesta metodológica para\ncaracterizar ambientes dulciacuícolas. Revista Geográfica de\nValparaíso 34, 243–253.\n\n\n\n\n",
    "preview": "posts/vegtable-press-2/images/vegtable-structure.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 1929,
    "preview_height": 1239
  },
  {
    "path": "posts/vegtable-intro/",
    "title": "Introduction to the package vegtable",
    "description": "The package vegtable offers objects and functions for the work with plot\nobservations in vegetation assessments (phytosociological relevés).\nThis object class ensures consistency on data, while it is also allowing\nflexibility in the degree of completeness and resolution of data.\nThis tutorial is an updated version of a workshop offered in the context of\nthe 16th Workshop of the German Group on Vegetation Databases celebrated in\nFreiburg in March 2017.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-30",
    "categories": [
      "R",
      "vegetation",
      "workshop"
    ],
    "contents": "\n\nContents\nFirst Steps\nInstallation of\nrequirements in R\nDocuments and data sets\n\nIntroduction to taxlist\nBuilding taxlist objects\nUsing character vectors\nUsing formatted tables\nUsing Turboveg species\nlist\n\nSummary displays\nExample data set\nAccess to slots\nSubsets\nParent-child\nrelationships\n\nIntroduction to vegtable\nBuilding vegtable\nobjects\nExample data set\nAccess to slots\nSubsets\nCross tables\n\nImport from Turboveg\nExport to Juice\nMap in leaflet\nUpdated on\nAknowledgements\n\n\nThe program of the workshop is accessible here.\nFirst Steps\nThis session deals with the management and process of taxonomic lists\nand retrieving information from vegetation-plot databases. Following\nsoftware will be required for this session:\nR\nRStudio\nTurboveg\nJuice\nGoogle Earth\nInstallation of requirements\nin R\nThough all required R-packages will be installed in the computer room\nprevious to this session, here there are instructions, in the case you\ntry to repeat the sessions in your own computer. Following command line\nshould be executed in order to install all required packages in\nR:\n\n\ninstall.packages(c(\"devtools\", \"foreign\", \"plotKML\", \"rgdal\", \"sp\", \"vegdata\",\n  \"vegan\", \"xlsx\"), dependencies=TRUE)\n\n\n\nThis session will focus on the use of two packages that use GitHub as repository for\nsharing and development. The package taxlist\nprocesses taxonomic lists that may be connected to biodiversity\ninformation (e.g. vegetation relevés), while the package vegtable has\na similar task but handling vegetation-plot records. Since\nvegtable is depending on taxlist, both\npackages should be installed and updated for this session:\n\n\nlibrary(remotes)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\", build_vignettes=TRUE)\n\n\n\nSince both package are been uploaded in the Comprehensive R Archive\nNetwork (CRAN), you can also use the common way to get the last released\nversion.\n\n\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n\n\nDocuments and data sets\nThis is the main document of the Workshop and will be distributed\namong its participants. Additionally, data sets required for the\nexamples are provided by the installation of the R-packages\ntaxlist and vegtable.\nIntroduction to taxlist\nThe package taxlist define an homonymous S4\nclass. Among other properties, S4 classes implement a\nformal definition of objects, tests for their validation and functions\n(methods) applied to them. Such properties are suitable for structure\ninformation of taxonomic lists and for data handling.\n\n\nlibrary(taxlist)\nshowClass(\"taxlist\")\n\n\n\nThis class is composed by four slots, corresponding to\ncolumn-oriented tables (class data.frame in\nR). While the slots taxonNames and\ntaxonRelations contain the information on names (labels of\ntaxon concepts) and taxon concepts, respectively, representing the core\ninformation of taxonomic lists.\nmost important information regarding taxa (taxon concepts),\ninformation in slots taxonTraits and\ntaxonViews is optional and they can be empty.\nBuilding taxlist objects\nBuilding taxlist objects can be achieved either through\na step-by-step routine working with small building blocks or by\nimporting consolidated data sets.\nUsing character vectors\nObjects of class taxlist can be just built from a list\nof names formatted as a character vector. To achieve it, the functions\nnew and add_concept are required.\n\n\nplants <- c(\"Lactuca sativa\",\"Solanum tuberosum\",\"Triticum sativum\")\nsplist <- new(\"taxlist\")\nsplist <- add_concept(splist, plants)\nsummary(splist)\n\n\n\nUsing formatted tables\nIn the case of consolidated species lists, they can be inserted in a\ntable previously formatted for taxlist (or\nTurboveg). Such tables can include both, accepted names\nfor plant species as well as their respective synonyms. A formatted\ntable is installed in the package taxlist.\n\n\nFile <- file.path(path.package(\"taxlist\"), \"cyperus\", \"names.csv\")\nCyperus <- read.csv(File, stringsAsFactors=FALSE)\nstr(Cyperus)\n\n\n\nThis table was originally imported form Turboveg and\ninherits some of its default columns. Four columns were renamed and are\nmandatory for process the table with the function\ndf2taxlist:\nTaxonUsageID is the key field of a table of names (slot\ntaxonNames).\nTaxonConceptID is the link of the name to its\nrespective concept (key field in slot taxonRelations.\nTaxonName is the name itself as character.\nAuthorName is a character value indicating the\nauthor(s) of the respective name.\nAdditionally the functions require a logical vector indicating, which\nof those names should be considered as synonyms or accepted names for\nits respective concept. This information is provided by the inverse\nvalue of the column SYNONYM in\nTurboveg.\n\n\nCyperus <- df2taxlist(Cyperus, !Cyperus$SYNONYM)\nsummary(Cyperus)\n\n\nobject size: 32.1 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 95 \nnumber of taxon concepts: 42 \ntrait entries: 0 \nnumber of trait variables: 0 \ntaxon views: 0 \n\nUsing Turboveg species list\nA direct import from a Turboveg database can be done\nusing the function tv2taxlist. The installation of\nvegtable includes data published by Fujiwara et\nal. (2014) with vegetation plots collected in forest stands\nfrom Kenya.\n\n\nlibrary(vegtable)\ntv_home <- file.path(path.package(\"vegtable\"), \"tv_data\")\nFujiwara <- tv2taxlist(\"Fujiwara_sp\", tv_home)\nsummary(Fujiwara)\n\n\n\nSummary displays\nFor taxlist objects there are basically two ways for\ndisplaying summaries. The first way is just ot apply the function\nsummary to a taxlist object:\n\n\nsummary(Cyperus)\n\n\nobject size: 32.1 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 95 \nnumber of taxon concepts: 42 \ntrait entries: 0 \nnumber of trait variables: 0 \ntaxon views: 0 \n\nNote that this option also executes a validity check of the object,\nas done by the function validObject.\nThe second way is getting information on a particular concept by\nadding it concept ID or a taxon usage name as second argument in the\nfunction.\n\n\nsummary(Cyperus, \"Cyperus dives\")\n\n\n------------------------------ \nconcept ID: 197 \nview ID: none \nlevel: none \nparent: none \n\n# accepted name: \n197 Cyperus dives Delile \n\n# synonyms (5): \n52000 Cyperus immensus C.B. Clarke \n52600 Cyperus exaltatus var. dives (Delile) C.B. Clarke \n52601 Cyperus alopecuroides var. dives Boeckeler \n52602 Cyperus immensus var. petherickii (C.B. Clarke) Kük. \n52603 Cyperus petherickii C.B. Clarke \n------------------------------\n\nSpecific information for several concepts can be displayed by using a\nvector with several concept IDs. Through the option\nConceptID=\"all\" it is also possible to get a display of the\nfirst concepts, depending on the value of the argument\nmaxsum.\n\n\nsummary(Cyperus, \"all\", maxsum=10)\n\n\n\nExample data set\nThe installation of taxlist includes the data\nEasplist, which is formatted as a taxlist\nobject. This data is a subset of the species list used by the database\nSWEA-Dataveg (GIVD ID\nAF-006):\n\n\ndata(Easplist)\nsummary(Easplist)\n\n\n\nAccess to slots\nThe common ways to access to the content of slots in S4\nobjects are either using the function slot(object, name) or\nthe symbol @ (i.e. object@name). Additional\nfunctions, which are specific for taxlist objects are\ntaxon_names, taxon_relations,\ntaxon_traits and taxon_views (see the help\ndocumentation).\nAdditionally, it is possible to use the methods $ and\n[ , the first for access to information in the slot\ntaxonTraits, while the second can be also used for other\nslots in the object.\n\n\nsummary(as.factor(Easplist$life_form))\n\n\n  acropleustophyte        chamaephyte     climbing_plant facultative_annual \n                 8                 25                 25                 20 \n   obligate_annual       phanerophyte   pleustohelophyte         reed_plant \n               114                 26                  8                 14 \n     reptant_plant      tussock_plant               NA's \n                19                 52               3576 \n\nSubsets\nMethods for the function subset are implemented in order\nto generate subsets of the content of taxlist objects. Such\nsubsets usually apply pattern matching (for character vectors) or\nlogical operations and are analogous to query building in relational\ndatabases. The subset method can be apply to any slot by\nsetting the value of the argument slot.\n\n\nPapyrus <- subset(Easplist, grepl(\"papyrus\", TaxonName), slot=\"names\")\nsummary(Papyrus, \"all\")\n\n\n\nOr the very same results:\n\n\nPapyrus <- subset(Easplist, TaxonConceptID == 206, slot=\"relations\")\nsummary(Papyrus, \"all\")\n\n\n\nSimilarly, you can look for a specific name.\n\n\nPhraaus <- subset(Easplist, charmatch(\"Phragmites australis\", TaxonName),\n  slot=\"names\")\nsummary(Phraaus, \"all\")\n\n\n\nParent-child relationships\nObjects belonging to the class taxlist can optionally\ncontent parent-child relationships and taxonomic levels. Such\ninformation is also included in the data Easplist, as shown\nin the summary output.\n\n\nsummary(Easplist)\n\n\nobject size: 761.4 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 5393 \nnumber of taxon concepts: 3887 \ntrait entries: 311 \nnumber of trait variables: 1 \ntaxon views: 3 \n\nconcepts with parents: 3698 \nconcepts with children: 1343 \n\nhierarchical levels: form < variety < subspecies < species < complex < genus < family \nnumber of concepts in level form: 2\nnumber of concepts in level variety: 95\nnumber of concepts in level subspecies: 71\nnumber of concepts in level species: 2521\nnumber of concepts in level complex: 1\nnumber of concepts in level genus: 1011\nnumber of concepts in level family: 186\n\nNote that such information can get lost once applied\nsubset, since the respective parents or children from the\noriginal data set are not anymore in the subset. May you like to recover\nparents and children, you can use the functions get_paretns\nor get_children, respectively.\n\n\nsummary(Papyrus, \"all\")\n\n\n------------------------------ \nconcept ID: 206 \nview ID: 1 \nlevel: species \nparent: none \n\n# accepted name: \n206 Cyperus papyrus L. \n\n# synonyms (2): \n52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. \n52613 Cyperus papyrus ssp. nyassicus Chiov. \n------------------------------\n\nPapyrus <- get_parents(Easplist, Papyrus)\nsummary(Papyrus, \"all\")\n\n\n------------------------------ \nconcept ID: 206 \nview ID: 1 \nlevel: species \nparent: 54853 Cyperus L. \n\n# accepted name: \n206 Cyperus papyrus L. \n\n# synonyms (2): \n52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. \n52613 Cyperus papyrus ssp. nyassicus Chiov. \n------------------------------ \nconcept ID: 54853 \nview ID: 2 \nlevel: genus \nparent: 55959 Cyperaceae Juss. \n\n# accepted name: \n54855 Cyperus L. \n------------------------------ \nconcept ID: 55959 \nview ID: 3 \nlevel: family \nparent: none \n\n# accepted name: \n55961 Cyperaceae Juss. \n------------------------------\n\nIntroduction to vegtable\nObjects of class vegtable are complex objects attempting\nto handle the most important information contained in vegetation-plot\ndatabases. They are defined in the homonymous package, while the species\nlist will be required as a taxlist object.\nAs already mentioned, S4 objects are composed by\nslots:\n\n\nlibrary(vegtable)\nshowClass(\"vegtable\")\n\n\n\nThe information contained in the slot is the following:\ndescription is containing the “metadata” of the\ndatabase as a named character vector.\nsamples is a column oriented table with the\nobservations of species (as usage IDs) in plots and layers.\nheader is a table containing information on the\nplots.\nspecies is the taxonmic list as taxlist\nobject.\nrelations are tables linked to categorical variables in\nslot header (called popups in\nTurboveg).\ncoverconvert is a list with conversion tables among\ncover scales.\nBuilding vegtable objects\nAn empty object (prototype) can be generated by using the function\nnew:\n\n\nVeg <- new(\"vegtable\")\n\n\n\nIt is also possible to build an object from cross tables, assuming\nall species included in the table are accepted names:\n\n\nFile <- file.path(path.package(\"vegtable\"), \"Fujiwara_2014\", \"samples.csv\")\nFujiwara <- read.csv(File, check.names=FALSE, stringsAsFactors=FALSE)\nFujiwara_veg <-df2vegtable(Fujiwara, 1, 2)\nsummary(Fujiwara_veg)\n\n\n\nExample data set\nThe package vegtable also provides own data sets as\nexamples. One of those examples is dune_veg, which contains\nthe data sets dune and dune.env from the\npackage vegan.\n\n\ndata(dune_veg)\nsummary(dune_veg)\n\n\n\nOther example is Kenya_veg, which also represent a\nsubset of the database SWEA-Dataveg (GIVD ID\nAF-00-006).\n\n\ndata(Kenya_veg)\nsummary(Kenya_veg)\n\n\n## Metadata \n   db_name: Sweadataveg\n   sp_list: Easplist\n   dictionary: Swea\n   object size: 9501 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 1946 \n   plots with records: 1946 \n   variables in header: 34 \n   number of relations: 3 \n\n## Taxonomic List \n   taxon names: 3164 \n   taxon concepts: 2392 \n   validity: TRUE \n\nAs shown in the previous commands, the function summary\ndisplays a general overview of the object’s content, while it also runs\na validity check. An additional display is offered by the function\nvegtable_stat:\n\n\nvegtable_stat(Kenya_veg)\n\n\n## Metadata \n   db_name: Sweadataveg\n   sp_list: Easplist\n   dictionary: Swea\n   object size: 9501 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 1946 \n   plots with records: 1946 \n   variables in header: 34 \n   number of relations: 3 \n\n## Taxonomic List \n   taxon names: 3164 \n   taxon concepts: 2392 \n   validity: TRUE \n\nREFERENCES \nPrimary references: 5\n\n## AREA \nArea range (m^2): 150 - 1750\n<1 m^2: 0%\n1-<10 m^2: 0%\n10-<100 m^2: 0%\n100-<1000 m^2: 2%\n1000-<10000 m^2: 1%\n>=10000 m^2: 0%\nunknow: 97%\n\n## TIME \noldest: 1983 - youngest: 2014\n<=1919: 0%\n1920-1929: 0%\n1930-1939: 0%\n1940-1949: 0%\n1950-1959: 0%\n1960-1969: 0%\n1970-1979: 0%\n1980-1989: 36%\n1990-1999: 31%\n2000-2009: 2%\n2010-2019: 1%\nunknow: 30%\n\n## DISTRIBUTION \nKE: 100%\n\n## PERFORMANCE \n01: 83%\n02: 17%\n03: 0%\n04: 0%\n05: 0%\n06: 0%\n07: 0%\n08: 0%\n09: 0%\n10: 0%\n11: 0%\n12: 0%\n\nAccess to slots\nSome functions are provided for the access to slots of\nvegtable objects, namely header and\nveg_relation, taxon_traits and\ntaxon_views (see the help documentation).\nFor a direct access of the content included in slot\nheader, there are the methods $ and\n[:\n\n\nsummary(Kenya_veg$REFERENCE)\nveg_relation(Kenya_veg, \"REFERENCE\")[,1:3]\n\n\n\nSubsets\nAs a way to generate queries from vegtable objects, a\nmethod for the function subset is implemented as well.\nFollowing is the case of the data set dune_veg generating a\nsubset with pasture plots.\n\n\ndata(dune_veg)\npasture <- subset(dune_veg, Use == \"Pasture\")\nsummary(dune_veg)\n\n\n## Metadata \n   object size: 22.2 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 20 \n   plots with records: 20 \n   variables in header: 6 \n   number of relations: 0 \n\n## Taxonomic List \n   taxon names: 30 \n   taxon concepts: 30 \n   validity: TRUE \n\nsummary(pasture)\n\n\n## Metadata \n   object size: 19.4 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 5 \n   plots with records: 5 \n   variables in header: 6 \n   number of relations: 0 \n\n## Taxonomic List \n   taxon names: 30 \n   taxon concepts: 30 \n   validity: TRUE \n\nCross tables\nMost of the applications dealing with analysis of vegetation tables\n(e.g. the package vegan) will deal with cross tables rather\nthan with column-oriented database lists. Therefore a function\ncrosstable is defined for the conversion of\ntaxlist objects to cross tables. Before building a cross\ntable it will be recommended to transform the cover into percentage\nvalue by using the function transform.\n\n\npasture <- cover_trans(pasture, to=\"Cover\", rule=\"middle\")\n\nCross <- crosstable(Cover ~ ReleveID + AcceptedName, pasture, max,\n  na_to_zero=TRUE)\nCross\n\n\n\nThe first argument in the function is the formula\ny ~ x1 + x2 + ... + xn, where:\ny is the cover value (a column in slot\nsamples).\nx1 is the plot ID or a grouping value from slot\nheader which will be used as columns in the cross\ntable.\nx2 is the output for species (either\nTaxonName or AcceptedName).\nx3 to xn are additional information for\nthe rows, such as layer, etc.\nThe second argument is the vegtable object and the third\nis a function, which will be applied in the case of multiple values in a\ncell (e.g. multiple records of a species within a plot).\nNote that there is also a method dealing with class\ndata.frame (see the help documentation).\n\n\ndune_veg <- cover_trans(dune_veg, to=\"Cover\", rule=\"middle\")\n\nCross_use <- crosstable(Cover ~ Use + AcceptedName, dune_veg, sum,\n  na_to_zero=TRUE)\nCross_use\n\n\n\nWhile the previous commands show statistics of groups in a vegetation\ntable, it is also possible to write a presence-absence table:\n\n\nCross_pa <- crosstable(Cover ~ ReleveID + AcceptedName, pasture, function(x) 1,\n  na_to_zero=TRUE)\nCross_pa\n\n\n\nImport from Turboveg\nThe original task of vegtable was the import of\nTurboveg databases in R. Thus one of the oldest\nfunctions in the package is tv2vegtable.\n\n\ntv_home <- file.path(path.package(\"vegtable\"), \"tv_data\")\nFujiwara <- tv2vegtable(\"Fujiwara_2014\", tv_home)\n\n\nzero values will be replaced by NAs \n\nsummary(Fujiwara)\n\n\n## Metadata \n   db_name: Fujiwara_2014\n   sp_list: Fujiwara_sp\n   dictionary: Swea\n   object size: 392.8 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 56 \n   plots with records: 56 \n   variables in header: 29 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 301 \n   taxon concepts: 254 \n   validity: TRUE \n\nScreenshot of Kenyan data set displayed\nin TurbovegIn the case there is an error message produced by inconsistent data\nstructure, there is the possibility of importing the data as a list for\nfurther inspection.\n\n\nFujiwara_list <- tv2vegtable(\"Fujiwara_2014\", tv_home, output=\"list\")\n\n\n\nExport to Juice\nExport of data for Juice follows a similar procedure\nas for cross tables.\n\n\nwrite_juice(Fujiwara, \"RiftValley\",\n  COVER_CODE ~ ReleveID + AcceptedName + LAYER,\n  header=c(\"TABLE_NR\",\"NR_IN_TAB\",\"ALTITUDE\",\"INCLINATIO\",\"EXPOSITION\",\n    \"COMM_TYPE\"),\n  FUN=paste0)\n\n\n\nBesides the vegtable object, the most important elements\nto export are:\nformula indicating how to construct the cross\ntable.\nheader to show which variables should be exported for\nthe head data.\ncoords with the names of coordinates, if present.\nFUN the function used for aggregate multiple\nrecords.\nThe values for coords should be as decimal degrees and\nin the spatial system WGS 84. In Juice such information\nwill be included in the header data as columns deg_lon\nand deg_lat, allowing the display of plots in\nGoogle Earth. The previous command has generated two\nfiles, namely RiftValley_table.txt and\nRiftValley_header.txt.\nFor importing the table, you may follow the steps:\nOpen Juice\nIn menu\nFile -> Import -> Table -> From Spreadsheet File (e.g. EXCEL Table)\nBrowse to RiftValley_table.txt and\nOpen\nIn the last step, select the option\nBraun-Blanquet Codes and Finish\nFinally, save the new file\nThe Kenyan data set displayed in\nJuiceNow for the head:\nIn menu\nFile -> Import -> Header Data -> From Comma Delimited File\nBrowse to RiftValley_header.txt and\nOpen\nDisplay of header data in\nJuiceMap in leaflet\nFor geo-referenced plots, you can easily map the location of the\nplots, for instance using the package leaflet.\n\n\nlibrary(leaflet)\nleaflet(Fujiwara@header) %>%\n    addTiles() %>%\n    addCircleMarkers(lng=~LONGITUDE, lat=~LATITUDE, color=\"red\",\n        opacity=0.5, radius=2)\n\n\n\n\nThen, hopefully you enjoyed the session and did not get too much\nerror messages.\nUpdated on\n20-06-2022\nAknowledgements\nThis workshop was supported by the project GlobE-wetlands.\n\n\n\n",
    "preview": "posts/vegtable-intro/images/Juice_table.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 1050,
    "preview_height": 824
  },
  {
    "path": "posts/vegtable-press/",
    "title": "vegtable: An R object for vegetation-plot data sets",
    "description": "The package vegtable defines the homonymous object class and functions\n(methods) for handling vegetation-plot data sets in R.\nWithin its slots, taxonomic lists are formatted as taxlist objects.\nThis is a brief account about a presentation of vegtable and taxlist at the\nMarsaryk University in Brno (Czech Republic).\nThe presentation includes a brief introduction to the structure of vegtable\nobjects and functions.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-29",
    "categories": [
      "R",
      "vegetation"
    ],
    "contents": "\nThis was a presentation about the basics of the packages vegtable and\ntaxlist.\nThese packages can be installed either from CRAN\n(last release) or GitHub (last development\nversion).\n\n\n## Installing from CRAN\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n## Installing from GitHub\nlibrary(remotes)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\")\n\n\n\nThe vignette installed for taxlist can be opened by\ncalling it at the R-console.\n\n\nlibrary(taxlist)\n\nvignette(\"taxlist-intro\")\n\n\n\nFor additional information, visit the respective pages inserted as\nhypertext at the beginning of this post.\n\n\n\n\n\n",
    "preview": "posts/vegtable-press/images/brno_vegtable_slide2.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 629,
    "preview_height": 354
  },
  {
    "path": "posts/sudamerica/",
    "title": "sudamerica: A vegetation-plot database for the Neo-Tropics",
    "description": "A database initiated for relevés in temperate grasslands in Chile but\ncurrently open for all the American continent with a strong focus in South\nAmerica.\nThis database attempt to store published relevés for meta-analysis purposes.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-13",
    "categories": [
      "database",
      "vegetation"
    ],
    "contents": "\nThe database sudamerica is formatted in PostgreSQL, including the extension PostGIS. sudamerica contains currently records from 1,642 plot observations obtained from 34 sources, most of them published either as journal articles or monographs. The oldest record was done in 12-01-1966, while the newest record is from 25-11-2013.\n \n\n\n\nThis database is maintained for research and teaching purposes. Data may be shared after a respective agreement with the custodian. Both, database and respective data sources may be cited in the case that information obtained from them get published. For data exchange (after a respective agreement with the custodian), objects of class vegtable will be preferred.\nSpecial thanks to Javier Amigo and Federico Luebert for providing own digitized data to this data base. Several students contributed by digitizing tables in the context of short-term assistance. The reference section below contains all publications used as data sources for sudamerica.\n\n\n\nAckermann, Markus. 2001. “Die Vegetation Der Bachfläufe in Der Hochatacama (Ii. Region) in Chile.” Candidate thesis, Philipps-Universität Marburg.\n\n\nAlvarez, Miguel. 2008. Diasporenbank Und ökologie Der Vegetation Temporärer Gewässer Im Cholchol-Gebiet (9. Region, Chile). Dissertationes Botanicae 407. Berlin: J. Cramer.\n\n\nAlvarez, Miguel, and Ulrich Deil. 2015. “Vascular Plant Assemblages of Ephemeral Wetland Vegetation Along the Mediterranean-Temperate Gradient in Chile.” Gayana Botánica 72 (2): 350–66.\n\n\nAlvarez, Miguel, Carlos Ramírez, Heriberto Figueroa, and Cristina San Martín. 2006. “Seed Banks in an Inundation Gradient of Two Grasslands in the 10\\(^{th}\\) Region (Chile) and Their Relationship with the Plant Cover.” Feddes Repertorium 117 (7-8): 571–86.\n\n\nAlvarez, Miguel, Cristina San Martín, Carla Novoa, Gisela Toledo, and Carlos Ramírez. 2010. “Diversidad Florística, Vegetacional Y de Hábitats En El Archipiélago de Los Chonos (Región de Aisén, Chile).” Anales Instituto Patagonia 38 (1): 35–56.\n\n\nAmigo, Javier, and Lorena Flores-Toro. 2012a. “Revisión Sintaxonómica de Los Bosques Esclerófilos de Chile Central: La Alianza Cryptocaryon Albae.” Lazaroa 33: 171–96. https://doi.org/10.5209/rev_laza.2012.v33.40283.\n\n\n———. 2012b. “The Supramediterranean Scrub in the Central Chilean Province: Phytosociological Position.” International Journal of Geobotanical Research 2: 87–110.\n\n\n———. 2013. “A New Contribution to Syntaxonomy of Sclerophyllous Forests and Pre-Forests of Central Chile: Lithraeion Causticae Alliance.” International Journal of Geobotanical Research 3: 47–67.\n\n\nAmigo, Javier, Carlos Ramírez, and Luis G. Quintanilla. 2007. “Mantle Communities of the Temperate Woodlands of South Central Chile: A Phytosociological Study of the Order Aristotelietalia Chilensis.” Phytocoenologia 37 (2): 269–319. https://doi.org/10.1127/0340-269x/2007/0037-0269.\n\n\nAmigo, Javier, Carlos Ramírez, and Luis G Quintanilla. 2004. “The Nothofagus Nitida (Phil.) Krasser Woodlands of Southern Chile in the Northern Half of Their Range: Phytosociological Position.” Acta Botanica Gallica 151 (1): 3–31.\n\n\nAmigo, Javier, and Manuel A. Rodríguez-Guitián. 2015. “Syntaxonomical Review of Sub-Antarctic Orotemperate Forests (Adenocaulo Chilensis-Nothofagetalia Pumilionis) in the Valdivian Biogeographic Province.” International Journal of Geobotanical Research 5: 13–35.\n\n\nAmigo, Javier, Manuel A. Rodríguez Guitián, and Carlos Ramírez. 2010. “The Lleuque Forests of South Central Chile: A Phytosociological Study and Syntaxonomical Classification Within South American Temperate Forests.” Lazaroa 31: 85–98.\n\n\nAmigo, Javier, José San Martín, and Luis García Quintanilla. 2000. “Estudio Fitosociológico de Los Bosques de Nothofagus Glauca (Phil.) Krasser Del Centro-Sur de Chile.” Phytocoenologia 30 (2): 193–221.\n\n\nAñazco, Nancy, Marcela Moraga, and Carlos Ramírez. 1981. “Distribución de Comunidades Pratenses Antropogénicas En Un Gradiente de Inclinación En Valdivia, Chile.” Agro Sur 9 (1): 14–27.\n\n\nDeil, Ulrich, Miguel Alvarez, and Inge Paulini. 2007. “Native and Non-Native Species in Annual Grassland Vegetation in Mediterranean Chile.” Phytocoenologia 37 (3-4): 769–84. https://doi.org/10.1127/0340-269x/2007/0037-0769.\n\n\nGutte, Peter. 1988. “Zu Einigen Wasserpflanzen- Und Röhrichtgesellschaften in Den Hochanden Zentralperus.” In Plantae Neotropicae, edited by Gerd K Müller, Peter Gutte, C Müller, and D L Schulz, 45–48. Leipzig: Karl-Marx-Universität.\n\n\nHauenstein, Enrique, Marcos González, Fernando Peña-Cortés, and Andrés Muñoz-Pedreros. 2002. “Clasificación Y Caracterización de La Flora Y Vegetación de Los Humedales de La Costa de Toltén (IX Región, Chile).” Gayana Botánica 59 (2): 87–100.\n\n\nMontaldo, Patricio. 1975. “Sinecología de Las Praderas Antropogénicas En La Provincia de Valdivia, Chile.” Agro Sur 3 (1): 16–24.\n\n\nRamírez, Carlos. 1968. “Die Vegetation Der Moore Der Cordillera Pelada, Chile.” Bericht Der Oberhessischen Gesellschaft Für Natur- Und Heilkunde Zu Gießen, Naturwissenschaftliche Abteilung 36: 95–101.\n\n\nRamírez, Carlos, Javier Amigo, and Cristina San Martín. 2003. “Vegetación Pratense Litoral Y Dinámica Vegetacional Antropogénica En Valdivia, Chile.” Agro Sur 31 (2): 24–37.\n\n\nRamírez, Carlos, Achim Ellies, Roberto Mac Donald, and Oscar Seguel. 2003. “Cambios En La Flora Y La Materia Orgánica Desde Bosques Nativos a Praderas Antropogénicas En Suelos Volcánicos de La IX Región de Chile.” Revista de La Ciencia Del Suelo Y Nutrición Vegetal 3 (1): 1–12.\n\n\nRamírez, Carlos, Heriberto Figueroa, and Cristina San Martín. 1989. “Cambios Estacionales de Frecuencia Y Cobertura En Una Pradera Del Centro-Sur de Chile.” Agro Sur 17 (2): 105–15.\n\n\nRamírez, Carlos, Ingrid Ortiz, Cristina San Martín, Osvaldo J Vidal, Miguel Alvarez, Yéssica Pérez, José Luis Solís, and Iván Alvarez. 2014. “Estudio Preliminar de La Biodiversidad Vegetal Terrestre En El Estero Walker (Región de Aysén, Chile): Utilizando Líneas Base de Proyectos de Inversión.” Gayana Botánica 71 (2): 227–45.\n\n\nRamírez, Carlos, and Magaly Riveros. 1975. “Contenido de Semillas En El Suelo Y Regeneración de La Cubierta Vegetal En Una Pradera de La Provincia de Valdivia, Chile.” Phyton 33 (1): 81–96.\n\n\nRamírez, Carlos, Cristina San Martín, Domingo Contreras, and José San Martín. 1994. “Estudio Fitosociológico de La Vegetación Pratense Del Valle Del Río Chol-Chol (Cautín, Chile).” Agro Sur 22 (1): 41–56.\n\n\nRamírez, Carlos, Cristina San Martín, Achim Ellies, and Roberto Mac Donald. 1997. “Cambios Florísticos, Fitosociológicos Y Edáficos Provocados Por Exclusión de Pastoreo En Una Pradera Valdiviana, Chile.” Agro Sur 24 (2): 180–95.\n\n\nRamírez, Carlos, Cristina San Martín, Juan Carlos Ramírez, and José San Martín. 1992. “Estudio Sinecológico de Las Praderas Del Valle Del Curso Inferior Del Río Imperial (Cautín, Chile).” Ciencia E Investigación Agraria 19 (3): 97–112.\n\n\nRamírez, Carlos, Cristina San Martín, Osvaldo J Vidal, Yéssica Pérez, Jorge Valenzuela, José Luis Solís, and Gisela Toledo. 2014. “Tundra Subantártica En La Isla Grande de Chiloé, Chile: Flora Y Vegetación Turbosa de Campañas.” Anales Instituto Patagonia 42 (2): 17–37.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Miguel Alvarez. 2004. “Estudio de La Vegetación de \"Mallines\" Y \"Campañas\" En La Cordillera Pelada (Valdivia, Chile).” Revista Geográfica de Valparaíso 35: 261–73.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Heriberto Figueroa. 1999. “Análisis Multivariable de La Vegetación de Un Complejo de Turberas En Cordillera Pelada (Valdivia, Chile).” Lazaroa 20: 95–106.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Pedro Ojeda. 1998. “La Vegetación de Lagunas Primaverales En Las Cercanías de Temuco (Cautín, Chile).” Acta Bot Malacitana 23: 99–120.\n\n\nSchwaar, Jürgen. 1976. “Die Hochmoore Feuerlands Und Ihre Pflanzengesellschaften.” Telma 6: 51–59.\n\n\n———. 1981. “Amphi-Arktische Pflanzengesellschaften in Feuerland.” Phytocoenologia 9 (4): 547–72.\n\n\nTeneb, Ernesto, Patricia Gómez, and Mariela González. 2008. “Observaciones Sobre La Flora Y Vegetación de Dos Turberas En La Región de Aisén, Patagonia Chilena.” Gayana Bot 65 (2): 229–32.\n\n\n\n\n",
    "preview": "posts/sudamerica/images/guadal_chile.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/sweadataveg/",
    "title": "SWEA-Dataveg: A vegetation-plot database for Africa",
    "description": "A collection of vegetation-plots from Africa, originally focused on wetland\nvegetation from Eastern Africa, it is currently expanded to other areas\nand considering any kind of vegetation.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-13",
    "categories": [
      "database",
      "vegetation"
    ],
    "contents": "\nVegetation-plot data from Eastern Africa and abroad\n \n\n\n\nThe database SWEA-Dataveg is formatted in PostgreSQL, including the extension PostGIS. For data exchange (after a respective agreement with the custodian), objects of class vegtable will be preferred.\nSWEA-Dataveg contains currently records from 5,552 plot observations that are provided by 47 sources. Most of those sources are works published either as journal articles or monographs.\nThe oldest record was done in 07-07-1937, while the newest record is from 17-02-2020.\n\n\n\n\n\n\n",
    "preview": "posts/sweadataveg/images/wetland_tz.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/taxlist-journey/",
    "title": "A journey in rOpenSci",
    "description": "A brief account of the experiences gained after a bit more than 2 years review\nprocess of the package taxlist for its submission to rOpenSci.\nThis journey resulted on new tools learned and new friends.\nThe talk was presented at LatinR 2020 (virtual meeting).",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-08",
    "categories": [
      "conference",
      "R"
    ],
    "contents": "\nAfter a long review process, where a lot of improvements have been\nimplemented, the package taxlist\nmanaged to be accepted in rOpenSci. The package\ntaxllist handles taxonomic lists as S4\nobjects in R.\nSuch objects can be used as modules within data sets of biodiversity\nrecords as in the package vegtable.\nIn a brief talk a summary of the experiences during the process of\nsubmission to rOpenSci was presented in the context of\nthe conference LatinR\n2020. Here you can access to the slides and\nthe video of\nthe presentation.\n\n\n\n\n\n",
    "preview": "posts/taxlist-journey/images/cover_video.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 749,
    "preview_height": 419
  },
  {
    "path": "posts/r4africa/",
    "title": "R for AfRica",
    "description": "The proliferation of freeware and open source applications expands the\npotential of scientists, especially in countries of difficult access to\ncommercial licenses for software tools.\nIn the context of enhanced international networks between education and\nresearch institutions, training on use of freeware is becoming a crucial step\nfor a better balance in collaboration between European and Eastern African\ncountries, harmonizing the capacities among researchers and students.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      },
      {
        "name": "Bisrat H. Gebrekhidan",
        "url": {}
      },
      {
        "name": "Samuel Kiboi",
        "url": {}
      }
    ],
    "date": "2020-05-13",
    "categories": [
      "R",
      "workshop"
    ],
    "contents": "\n\n\n\n",
    "preview": "posts/r4africa/images/bisrat_teaching.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/wetlands-front/",
    "title": "Tanzanian wetlands in the cover of Phytocoenologia",
    "description": "A publication on classification of East African wetland communities in the\ncontext of the Braun-Blanquet approach managed to the cover of the journal\nPhytocoenologia.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2017-12-01",
    "categories": [
      "vegetation",
      "wetlands"
    ],
    "contents": "\nAfter a long process of learning, storing data, collecting\npublications and analysing data, the work entitled Classification of\naquatic and semi-aquatic vegetation in two East African sites: Cocktail\ndefinitions and syntaxonomy (Alvarez 2017)\nappeared in the volume 47 of the journal\nPhytocoenologia. This article assesses vegetation-plots\nfrom two localities (one Tanzanian site and one Kenyan site) with a\nsupervised classification method (Cocktail) and includes an exhaustive\nreview on previous syntaxonomical works. One of the localities (Kwasunga\nin Tanzania) appears in the cover page of the issue. Wetland ecosystems\nare important providers of services for the people and fulfil essential\necological functions. Syntaxonomic classifications according to species\ncomposition and ecological preferences are useful references for\nmonitoring of integrity and to assess the importance of wetlands for\nconservation purposes.\n\n\nAlthough in this article I am the only author, I was not alone in the\njourney. I have to thank Ulrich Deil (University of\nFreiburg, Germany) for allowing me to access his personal library,\nMilan Chytrý (University of Brno, Czech Republic) for\nmentoring me on the hard way of doing Cocktail, and to Jan\nRoleček (Czech Academy of Sciences, Czech Republic) for his\nsupport as editor. I also have to thank to two anonymous reviewers of\nthe manuscript and all Kenyan and Tanzanian colleagues that supported me\nduring the field activities.\n\n\n\n",
    "preview": "posts/wetlands-front/images/cover_cropped.jpg",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {}
  },
  {
    "path": "posts/2020-11-20-vegtablepress2/",
    "title": "Basics on the work with vegetation-plots in vegtable",
    "description": "The package vegtable was developed for the handling of data provided by\nvegetation-plot databases in single objects within R sessions.\nIn this package functions attempt to encapsulate process of complex data sets\nin brief command-lines during an R session and target to repeatability in the\nassessment of floristic information.\nHere we review through some examples the use of the most important functions\nimplemented in vegtable.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2000-11-20",
    "categories": [],
    "contents": "\n\n\n\n",
    "preview": "posts/2020-11-20-vegtablepress2/images/vegtable_diagram.png",
    "last_modified": "2022-08-23T09:13:40+00:00",
    "input_file": {},
    "preview_width": 3715,
    "preview_height": 1565
  }
]
