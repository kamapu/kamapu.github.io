[
  {
    "path": "posts/multivar/",
    "title": "Course on Multivariate Statistics an R",
    "description": "A course on the applications of multivariate statistics on vegetation ecology\nis scheduled for the period between the 16th and 23rd of November in\nNairobi.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2021-05-11",
    "categories": [
      "R",
      "vegetation"
    ],
    "contents": "\nBrief description here\nSee program here.\n\n\n\n",
<<<<<<< HEAD
    "preview": "posts/multivar/images/poster-course.jpg",
    "last_modified": "2022-06-06T22:24:58+02:00",
=======
    "preview": "posts/2021-11-05-multivar/images/poster-course.jpg",
    "last_modified": "2022-06-06T19:38:12+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {}
  },
  {
    "path": "posts/vegtable-press-2/",
    "title": "Basics on the work with vegetation-plots in vegtable",
    "description": "The package vegtable was developed for the handling of data provided by\nvegetation-plot databases in single objects within R sessions.\nIn this package functions attempt to encapsulate process of complex data sets\nin brief command-lines during an R session and target to repeatability in the\nassessment of floristic information.\nHere we review through some examples the use of the most important functions\nimplemented in vegtable.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-11-20",
    "categories": [
      "R",
      "vegetation"
    ],
    "contents": "\n\nContents\nInstallation\nWorking with species\nlists only\nAdvanced displays\n\nWorking with\nvegetation-plots\nStructure\nStatistics\nTrait proportions\nTrait Statistics\nStatistics from\ntaxonomic information\n\nCross tables and Maps\nUpdated on\nAcknowledgement\n\n\nInstallation\nBoth packages taxlist and\nvegtable\nare released in the Comprehensive R Archive Network\n(CRAN). Since taxlist is a dependency of\nvegtable, both will be installed in the following\ncommand:\n\n\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n\n\nAlternatively, you can install the development versions from their\nrepositories at GitHub.\n\n\nlibrary(devtools)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\")\n\n\n\nAn additional package including some example data required for this\nsession have also to be installed from GitHub.\n\n\ninstall_github(\"kamapu/datastore\")\n\n\n\n\n\nto the slides \nWorking with species lists\nonly\nBefore starting with the work, do not forget to load the installed\npackages into your R-session:\n\n\nlibrary(vegtable)\nlibrary(datastore)\n\n\n\nIn this first section we focus on the taxlist objects,\nwhich are specialized for handling taxonomic lists. For more details on\nthe theory behind this package, see Alvarez and Luebert (2018).\nThe package taxlist includes a own data set formatted as\na taxlist object. You can get a general report on the\ncontent of this data set by using the function\nsummary().\n\n\ndata(Easplist)\nsummary(Easplist)\n\n\nobject size: 761.4 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 5393 \nnumber of taxon concepts: 3887 \ntrait entries: 311 \nnumber of trait variables: 1 \ntaxon views: 3 \n\nconcepts with parents: 3698 \nconcepts with children: 1343 \n\nhierarchical levels: form < variety < subspecies < species < complex < genus < family \nnumber of concepts in level form: 2\nnumber of concepts in level variety: 95\nnumber of concepts in level subspecies: 71\nnumber of concepts in level species: 2521\nnumber of concepts in level complex: 1\nnumber of concepts in level genus: 1011\nnumber of concepts in level family: 186\n\nThe information stored in a taxlist object is organized\nin four column-oriented tables following a relational model and\nallocated in own slots within the object. The access to the respective\nslots in R is done with the symbol @ or alternatively using\nthe function slot().\n\n\n\n\n\nhead(Easplist@taxonNames)\n\n\n  TaxonUsageID TaxonConceptID              TaxonName\n1            1              1 Abelmoschus esculentus\n2        52313              1    Hibiscus esculentus\n3            2              2       Abutilon indicum\n4            3              3   Abutilon mauritianum\n5        50361              3         Pavonia patens\n6            4              4   Acacia drepanolobium\n            AuthorName\n1          (L.) Moench\n2                   L.\n3                 (L.)\n4       (Jacq.) Medik.\n5     (Andrews) Chiov.\n6 Harms ex Y. Sjöstedt\n\nhead(Easplist@taxonRelations)\n\n\n  TaxonConceptID AcceptedName Basionym Parent   Level ViewID\n1              1            1       NA  54753 species      1\n2              2            2       NA  54754 species      1\n3              3            3       NA  54754 species      1\n4              4            4       NA  54755 species      1\n5              5            5       NA  54755 species      1\n6              6            6       NA  54755 species      1\n\nhead(Easplist@taxonTraits)\n\n\n  TaxonConceptID          life_form\n1              7       phanerophyte\n2              9       phanerophyte\n3             18 facultative_annual\n4             20 facultative_annual\n5             21    obligate_annual\n6             22        chamaephyte\n\nhead(Easplist@taxonViews)\n\n\n  ViewID                                 secundum view_bibtexkey\n1      1            African Plant Database (2012)  CJBGSANBI2012\n2      2 Taxonomic Name Resolution Service (2018)       TNRS2018\n3      3                    The Plant List (2013)        TPL2013\n\nAdvanced displays\nThe function summary() can also be used to query\ninformation of a taxon or a set of taxa. In such case we can add the\nname of the requested taxon usage name. We can also specify a column of\nthe slot taxonViews in the parameter\nsecundum in order to get more informatin on the respective\ntaxon view as done here:\n\n\nsummary(Easplist, \"Amaranthus hybridus\", secundum=\"secundum\")\n\n\n------------------------------ \nconcept ID: 37 \nview ID: 1 - African Plant Database (2012) \nlevel: species \nparent: 54771 Amaranthus L. \n\n# accepted name: \n37 Amaranthus hybridus L. \n------------------------------ \nconcept ID: 38 \nview ID: 1 - African Plant Database (2012) \nlevel: subspecies \nparent: 37 Amaranthus hybridus L. \n\n# accepted name: \n38 Amaranthus hybridus ssp. cruentus (L.) Thell. \n\n# synonyms (1): \n50004 Amaranthus cruentus L. \n------------------------------ \nconcept ID: 50820 \nview ID: 1 - African Plant Database (2012) \nlevel: subspecies \nparent: 37 Amaranthus hybridus L. \n\n# accepted name: \n50820 Amaranthus hybridus ssp. hybridus L. \n------------------------------\n\nAdditionally the function print_name() can be used to\nformat scientific names within interactive documents, for instance in\ncombination with the package rmarkdown. See the example by\nexample(print_name), which is printing in different\nformats.\n\n\n\nWorking with\nvegetation-plots\nFurther examples will be applied to a data set available at the\ninstalled package datastore, which corresponds to plot\nobservations in grassland and semi-aquatic communities from Temuco,\nChile. This data set was originally published by San Martín et al. (1998) and is\nstored in the database sudamerica (https://kamapu.github.io/sudamerica/, see also\nAlvarez et al.,\n2012).\n\n\ndata(grasslands)\nsummary(grasslands)\n\n\n## Metadata \n   db_name: sudamerica\n   description: Database for vegetation-plots from South America.\n   taxonomy: sam_splist\n   bibtexkey: NA\n   object size: 195.8 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 80 \n   plots with records: 80 \n   variables in header: 13 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 548 \n   taxon concepts: 199 \n   validity: TRUE \n\nStructure\nObjects of class vegtable are structured into 8 slots,\nwhere the slots species, header, and\nsamples are the essential ones.\n\n\n\nThe taxonomic list is handled as a taxlist object and is\nlocated at the slot species:\n\n\nsummary(grasslands@species)\n\n\nobject size: 98 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 548 \nnumber of taxon concepts: 199 \ntrait entries: 85 \nnumber of trait variables: 8 \ntaxon views: 10 \n\nconcepts with parents: 164 \nconcepts with children: 113 \n\nhierarchical levels: form < variety < subspecies < species < section < subgenus < genus < subfamily < family < phylum \nnumber of concepts in level form: 0\nnumber of concepts in level variety: 6\nnumber of concepts in level subspecies: 1\nnumber of concepts in level species: 86\nnumber of concepts in level section: 0\nnumber of concepts in level subgenus: 0\nnumber of concepts in level genus: 71\nnumber of concepts in level subfamily: 0\nnumber of concepts in level family: 35\nnumber of concepts in level phylum: 0\n\nThe slot header is simply a data frame including\ninformation related to single plot observations, for instance size of\nthe plot, record date, results of soil analyses, etc.\n\n\nhead(grasslands@header)\n\n\n    ReleveID table_number column_number plot_size plot_length\n445     6091            3             1        25          NA\n469     6115            3             2        25          NA\n470     6116            3            13        25          NA\n592     6234            2             8        25          NA\n593     6235            2            10        25          NA\n594     6236            2            11        25          NA\n    plot_width elevation community_type page_number    db_name\n445         NA       163            565         105 sudamerica\n469         NA       163            565         105 sudamerica\n470         NA       199            565         105 sudamerica\n592         NA       199            534         104 sudamerica\n593         NA        77            534         104 sudamerica\n594         NA       168            534         104 sudamerica\n    data_source longitude latitude\n445          29  -72.7201 -38.6727\n469          29  -72.7201 -38.6727\n470          29  -72.7341 -38.6310\n592          29  -72.7341 -38.6310\n593          29  -72.7440 -38.6846\n594          29  -72.6958 -38.7141\n\nRecords of species in plots are stored in slot\nsamples. Against the commonly used cross tables\n(species by plots or plots by species), this slot is organized in\ncolumns (column-oriented table, a.k.a database list).\n\n\nhead(grasslands@samples)\n\n\n      record_id ReleveID TaxonUsageID cover_percentage\n10575    138697     7285        20972             15.0\n10576    138698     7285        23744             60.0\n10577    138699     7285         9373             20.0\n10578    138700     7285       196060              0.5\n10579    138701     7285        35072              5.0\n10580    138702     7285         9953              0.5\n\nThe slot coverconvert have an own, homonymous class\nand is used as container for cover conversion tables. These tables can\nbe used for conversion of cover codes, which will be done by the\nfunction transform(). The example on grasslands does not\ninclude cover conversion tables but the data set installed with\nvegtable does it.\n\n\nsummary(Kenya_veg@coverconvert)\n\n\n## Number of cover scales: 3 \n\n* scale 'br_bl': \n  Levels    Range\n1      r    0 - 1\n2      +    0 - 1\n3      1    1 - 5\n4      2   5 - 25\n5      3  25 - 50\n6      4  50 - 75\n7      5 75 - 100\n\n* scale 'b_bbds': \n  Levels    Range\n1      r    0 - 1\n2      +    0 - 1\n3      1    1 - 5\n4     2m    1 - 5\n5     2a   5 - 15\n6     2b  15 - 25\n7      3  25 - 50\n8      4  50 - 75\n9      5 75 - 100\n\n* scale 'ordin.': \n  Levels    Range\n1      1    0 - 1\n2      2    0 - 1\n3      3    1 - 5\n4      4    1 - 5\n5      5   5 - 15\n6      6  15 - 25\n7      7  25 - 50\n8      8  50 - 75\n9      9 75 - 100\n\nThe slot relations is a list of data frames that\nprovide additional information for classes of categorical variables\nstored in slot header. These tables correspond to\npop-up tables of Turboveg 2.\n\n\nnames(grasslands@relations)\n\n\n[1] \"community_type\" \"data_source\"   \n\nhead(grasslands@relations$community_type)\n\n\n  community_type\n1            298\n2            305\n3            307\n4            310\n5            313\n6            315\n                                                       community_name\n1            Loudetia phragmitoides-Hyparrhenia bracteata-communities\n2                                             Loudetio-Fimbristyletum\n3                                            Euphorbieto-Portulacetum\n4                                 Amaranthus sp- Synedrella nodiflora\n5                               Pennisetum purpureum-Acalypha ciliata\n6 Sporobolus festivus-Hysanthes trichotoma (sous-association typique)\n\nWhile in the header table such categorical variables may be cryptic,\nthere is an option to insert columns from relations into header by using\nrelation2header(). By this way, yo do not only see a\ncommunity id, which is just a number, but you can also see the\nrespective names of the plant communities that correspond to the syntaxa\nassigned to the plots originally by the publication.\n\n\ngrasslands <- relation2header(grasslands, \"community_type\")\nhead(grasslands@header)\n\n\n    ReleveID table_number column_number plot_size plot_length\n445     6091            3             1        25          NA\n469     6115            3             2        25          NA\n470     6116            3            13        25          NA\n592     6234            2             8        25          NA\n593     6235            2            10        25          NA\n594     6236            2            11        25          NA\n    plot_width elevation community_type page_number    db_name\n445         NA       163            565         105 sudamerica\n469         NA       163            565         105 sudamerica\n470         NA       199            565         105 sudamerica\n592         NA       199            534         104 sudamerica\n593         NA        77            534         104 sudamerica\n594         NA       168            534         104 sudamerica\n    data_source longitude latitude\n445          29  -72.7201 -38.6727\n469          29  -72.7201 -38.6727\n470          29  -72.7341 -38.6310\n592          29  -72.7341 -38.6310\n593          29  -72.7440 -38.6846\n594          29  -72.6958 -38.7141\n                            community_name\n445 Mentho pulegium-Agrostietum capillaris\n469 Mentho pulegium-Agrostietum capillaris\n470 Mentho pulegium-Agrostietum capillaris\n592                       Juncetum proceri\n593                       Juncetum proceri\n594                       Juncetum proceri\n\nStatistics\nThe packages vegtable and taxlist are\nrather specialized on data manipulation than on data analysis.\nNevertheless some common descriptive statistics and summaries that can\nbe used for further statistical analyses are implemented.\nTrait proportions\nIn this data set, for instance, life forms are inserted as attributes\nof the recorded species. Since this attribute is a categorical variable,\nsummaries at the plot level can only be done as proportions. The\nfunction trait_proportion() is suitable for such kind of\nsummaries. Note that the best way to collect statistics calculated for\nplots is adding them as new columns into the slot\nheader, which is done by the option\nin_header=TRUE. Additionally, the option\nweight=\"cover_percentage\" is indicating that the cover\npercentage stored in the slot samples will be used as\nweight for the respective life from classes.\n\n\ngrasslands <- trait_proportion(trait=\"life_form\", object=grasslands,\n    head_var=\"ReleveID\", include_nas=FALSE, weight=\"cover_percentage\",\n    in_header=TRUE)\n\n\n\nBy default, the function added at slot header one\ncolumn per level in the traits variable appending a suffix (default\n_prop). Just to remind you, we used the function\nrelation2header() in order to add the names of the recorded\ncommunities in the slot header.\n\n\n# Add community names to the header table\ngrasslands <- relation2header(grasslands, relation=\"community_type\")\n\n# Display mean values per plant communities\naggregate(annual_prop ~ community_name, data=grasslands@header, FUN=mean)\n\n\n                                community_name annual_prop\n1                     Anthoxanthum utriculatum 0.007826989\n2                  Eleocharietum macrostachyae 0.096678841\n3                    Eleocharietum pachycarpae 0.092635324\n4        Eleocharis pachycarpa-Lythrum portula 0.173790650\n5                      Glycerietum multiflorae 0.000000000\n6  Gnaphalio cymatoidis-Polygonetum piperoidis 0.650889962\n7                             Juncetum proceri 0.001167405\n8             Junco proceri-Caricetum ripariae 0.000000000\n9   Ludwigia peploides-Sagittaria montevidense 0.000000000\n10      Mentho pulegium-Agrostietum capillaris 0.041020366\n11                             Phyla nodiflora 0.958893907\n\n# The same information as boxplot\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(annual_prop ~ community_name, data=grasslands@header, horizontal=TRUE,\n    xlab=\"Proportion of annuals\", ylab=\"\")\n\n\n\n\nBefore you continue, note that the first argument in the function is\na formula indicating on the left a response as left term\n(in this case the statistic describing a categorical trait variable) and\nthe factors as right terms (grouping variables for the plots). This kind\nof objects will be frequently used in functions dealing with\nvegtable objects.\nTrait Statistics\nFor numerical taxonomic traits statistical parameters such as\naverages and standard deviation can be calculated per plot. For instance\nthe data set grasslands is also including Ellenberg’s\nindicator values (see\nEllenberg et\nal., 2001), which were collected from Ramírez et al. (1991) and San Martín et al.\n(2003).\nThe calculation of trait statistics is done by the function\ntrait_stats(). In the parameter FUN we can use\na statistical function such as mean() but we can also\ndefine an statistic using the cover values as weights for the\ncalculation. In this case we can calculate weighted means:\n\\[\\bar{x} = \\frac{\\sum{x_{i} \\cdot\nw_{i}}}{\\sum{w_{i}}}\\]\nHere \\(\\bar{x}\\) is the mean\nindicator figure for a plot, \\(x_{i}\\)\nis the indicator value of the ith species in this plot, and\n\\(w_{i}\\) is the weight of the same\nspecies (cover value) in the plot. In R we define it as a function:\n\n\nweighted_mean <- function(x, w, ...) sum(x*w, ...)/sum(w, ...)\n\n\n\nIn the function trait_stats() we can query indicator\nfigures through a formula. Note that this formula may include multiple\nvariables on the left terms for the simultaneous calculation of\nindicator values.\n\n\ngrasslands <- trait_stats(ind_n + ind_h ~ ReleveID, grasslands,\n    FUN=weighted_mean,  include_nas=FALSE, weight=\"cover_percentage\",\n    suffix=\"_wmean\", in_header=TRUE)\n\n\n\nThe resulting values may be useful to compare different plant\ncommunities or to test relationships between different variables, for\ninstance an expected correlation between the humidity indicator and the\nproportion of annuals.\n\n\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(ind_h_wmean ~ community_name, data=grasslands@header, horizontal=TRUE,\n    xlab=\"H figure (weighted mean)\", ylab=\"\")\n\n\n\n\n\n\n# Linear regression model\nMod <- lm(annual_prop ~ ind_h_wmean, data=grasslands@header)\n\n# plot\nplot(grasslands@header[,c(\"ind_h_wmean\", \"annual_prop\")], xlab=\"H figure\",\n    ylab=\"Proportion of annuals\", pch=20, col=\"darkgrey\")\nabline(Mod, lty=2, col=\"red\")\n\n\n\n\nWell, it is not a nice distribution of observations but still\nsuggesting a negative tendency in the proportion of annuals by\nincreasing humidity indicator, as expected.\nStatistics from taxonomic\ninformation\nTaxonomic information (taxonomic ranks and parent-child\nrelationships) are not directly available for statistical descriptions\nin taxlist objects. If we need to calculate proportions of\ndetermined genera or families in the plots, we can pass the taxonomy to\nthe taxon traits table with the function tax2traits(). You\nneed to set get_names=TRUE, otherwise only taxon IDs\n(numbers) will be inserted in the traits table.\n\n\ngrasslands@species <- tax2traits(grasslands@species, get_names=TRUE)\nhead(grasslands@species@taxonTraits)\n\n\n   TaxonConceptID origin_status life_form ind_l ind_t ind_r ind_n\n2           57184        native perennial    NA    NA    NA    NA\n10          57504        native perennial     6     5     4     3\n17          58062        native perennial    NA    NA    NA    NA\n41          61842          <NA>      <NA>     8     6     5     7\n43          61852          <NA>      <NA>     6     7    NA     8\n44          61853     adventive perennial     8     5     5     5\n   ind_h ind_s variety subspecies                species\n2     NA    NA    <NA>       <NA>      Adesmia corymbosa\n10     6    NA    <NA>       <NA>      Dichondra sericea\n17    NA    NA    <NA>       <NA>     Setaria parviflora\n41    12    NA    <NA>       <NA>  Callitriche palustris\n43     5    NA    <NA>       <NA> Echinochloa crus-galli\n44     5    NA    <NA>       <NA>  Arrhenatherum elatius\n           genus         family\n2        Adesmia    Leguminosae\n10     Dichondra Convolvulaceae\n17       Setaria        Poaceae\n41   Callitriche Plantaginaceae\n43   Echinochloa        Poaceae\n44 Arrhenatherum        Poaceae\n\nNow we can compare, for instance, the proportion of species belonging\nto the family Poaceae (grasses) in the different plant communities.\n\n\ngrasslands <- trait_proportion(\"family\", grasslands, head_var=\"ReleveID\",\n    trait_level=\"Poaceae\", include_nas=FALSE, weight=\"cover_percentage\",\n    in_header=TRUE)\n\n# Compare communities by proportion of Poaceae\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(Poaceae_prop ~ community_name, data=grasslands@header,\n    horizontal=TRUE, xlab=\"Proportion of Poaceae\", ylab=\"\")\n\n\n\n\nThis graphic is advising us that maybe few of these communities can\nbe considered as grasslands sensu stricto.\nThe function count_taxa() is defined for calculation of\nnumber of taxa at specific taxonomic ranks. Note that this function may\nbe smart enough to aggregate taxa into the corresponding ranks, for\ninstance the calculation of species numbers may also include\nsub-specific taxa in their respective species (option\ninclude_lower=TRUE).\n\n\ngrasslands <- count_taxa(species ~ ReleveID, grasslands, include_lower=TRUE,\n    in_header=TRUE)\n\n# Compare communities by species richness\npar(mar=c(5, 20, 1, 1), las=1)\nboxplot(species_count ~ community_name, data=grasslands@header,\n    horizontal=TRUE, xlab=\"Species richness\", ylab=\"\")\n\n\n\n\nCross tables and Maps\nMost of the applications used for floristic comparisons require data\nin form of a cross table. Furthermore, species composition of\ncommunities may be more evident by displaying data, for instance, in a\ntable of species by plots. To arrange data in such a way we can apply\nthe function crosstable().\nIn order to reduce the data set, we will apply the function\nsubset(), selecting plots of the association Juncetum\nproceri.\n\n\njuncetum <- subset(grasslands, community_name == \"Juncetum proceri\",\n    slot=\"header\")\nsummary(juncetum)\n\n\n## Metadata \n   db_name: sudamerica\n   description: Database for vegetation-plots from South America.\n   taxonomy: sam_splist\n   bibtexkey: NA\n   object size: 217.2 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 15 \n   plots with records: 15 \n   variables in header: 20 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 548 \n   taxon concepts: 199 \n   validity: TRUE \n\nIn the function crosstable() we indicate as formula in\nthe left term the numeric variable used to fill the table, the first\nright term is the group variable used for the columns and the further\nright terms are group variables defining the rows of the cross table.\nNote that the taxa in the formula can be addressed by either one of two\nkeywords, namely TaxonName for the use of original\nentry names (taxon usage names) or AcceptedName for use\nof the respective names considered as accepted in slot species. We also\nset the arguments FUN=max defining the function used to\nmerge multiple occurrences of a taxon in a plot and\nna_to_zero=TRUE to fill absence.\n\n\njuncetum_cross <- crosstable(cover_percentage ~ ReleveID + AcceptedName,\n    data=juncetum, FUN=max, na_to_zero=TRUE)\nhead(juncetum_cross)\n\n\n                         AcceptedName 6236 6237 6239 7285 7423 7643\n1    Adesmia corymbosa var. corymbosa  0.5  0.5  0.5   10  0.5  0.5\n2                 Agrostis capillaris 10.0 30.0  0.0   15 40.0 20.0\n3            Anthoxanthum utriculatum  0.0  0.0  0.0    0  0.0  0.0\n4 Arrhenatherum elatius var. bulbosum  0.0  0.0  0.0    0  0.0  0.0\n5                Baccharis sagittalis  0.0  0.0  0.0    0  0.0  0.0\n6               Centipeda elatinoides  0.0  0.5  0.0    0  0.0  0.5\n  6234 6235 6238 6588 6589 6804 6805 7294 7303\n1    0  0.0  0.0    0    0  0.0    0    0    0\n2   50 20.0 40.0   10   30 20.0   50   20   50\n3    0  0.5  0.0    0    0  0.0    0    0    0\n4    0  0.5  0.0    0    0  0.0    0    0    0\n5    0  0.0  0.5    0    0  0.0    0    0    0\n6    0  0.0  0.0    0    0  0.5    0    0    0\n\nWhen plots are geo-referenced, it is also possible to export the\nrespective locations as kml files to be displayed in Google\nEarth using the function vegtable2kml().\n\n\nvegtable2kml(grasslands, file=\"grasslands.kml\", coords= ~ longitude + latitude)\n\n\n\nAlternatively the locations of plots can be displayed by using the\npackage leaflet.\n\n\nlibrary(leaflet)\nleaflet(grasslands@header) %>% addTiles() %>%\n    addCircleMarkers(lng=~longitude, lat=~latitude, color=\"red\",\n        opacity=0.3, radius=1)\n\n\n\n\nUpdated on\n06-06-2022\nAcknowledgement\nThe data sets and routines demonstrated here have been previously\ntested by Elena Gómez in the context of her thesis for the degree of\nMSc. (Gómez, 2020). Any\nfurther comments and suggestions are kindly welcomed.\n\n\n\nAlvarez, M. and Luebert, F. (2018) The taxlist package:\nManaging plant taxonomic lists in R. Biodiversity Data\nJournal 6, e23635. doi:10.3897/bdj.6.e23635.\n\n\nAlvarez, M., Möseler, B. M., Martín, C. S., Ramírez, C. and\nAmigo, J. (2012) CL-Dataveg  a\ndatabase of Chilean grassland vegetation. Biodiversity\n& Ecology 4, 443. doi:10.7809/b-e.00230.\n\n\nEllenberg, H., Weber, H. E., Düll, R., Wirth, V. and Werner,\nW. (2001) Zeigerwerte von pflanzen in mitteleuropa.\nGöttingen, Erich Goltze.\n\n\nGómez, E. (2020) Explorative and retrospective\nevaluation of grassland vegetation in Southcentral Chile.\n\n\nRamírez, C., Finot, V. L., San Martín, C. and Ellies,\nA. (1991) El valor indicador ecológico de las malezas del\ncentro-sur de Chile. Agro Sur 19,\n94–116.\n\n\nSan Martín, C., Ramírez, C. and Ojeda, P. (1998) La\nvegetación de lagunas primaverales en las cercanías de Temuco\n(Cautín, Chile). Acta Botanica Malacitana\n23, 99–120.\n\n\nSan Martín, C., Ramírez, C. and Alvarez, M. (2003)\nMacrófitos como bioindicadores: Una propuesta metodológica para\ncaracterizar ambientes dulciacuícolas. Revista Geográfica de\nValparaíso 34, 243–253.\n\n\n\n\n",
    "preview": "posts/vegtable-press-2/images/vegtable_diagram.png",
<<<<<<< HEAD
    "last_modified": "2022-06-06T13:22:16+02:00",
=======
    "last_modified": "2022-06-06T19:38:12+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {},
    "preview_width": 3715,
    "preview_height": 1565
  },
  {
    "path": "posts/vegtable-intro/",
    "title": "Introduction to the package vegtable",
    "description": "The package vegtable offers objects and functions for the work with plot\nobservations in vegetation assessments (phytosociological relevés).\nThis object class ensures consistency on data, while it is also allowing\nflexibility in the degree of completeness and resolution of data.\nThis tutorial is an updated version of a workshop offered in the context of\nthe 16th Workshop of the German Group on Vegetation Databases celebrated in\nFreiburg in March 2017.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-30",
    "categories": [
      "R",
      "vegetation",
      "workshop"
    ],
    "contents": "\n\nContents\nFirst Steps\nInstallation of\nrequirements in R\nDocuments and data sets\n\nIntroduction to taxlist\nBuilding taxlist objects\nUsing character vectors\nUsing formatted tables\nUsing Turboveg species\nlist\n\nSummary displays\nExample data set\nAccess to slots\nSubsets\nParent-child\nrelationships\n\nIntroduction to vegtable\nBuilding vegtable\nobjects\nExample data set\nAccess to slots\nSubsets\nCross tables\n\nImport from Turboveg\nExport to Juice\nMap in leaflet\nUpdated on\nAknowledgements\n\n\nThe program of the workshop is accessible here.\nFirst Steps\nThis session deals with the management and process of taxonomic lists\nand retrieving information from vegetation-plot databases. Following\nsoftware will be required for this session:\nR\nRStudio\nTurboveg\nJuice\nGoogle Earth\nInstallation of requirements\nin R\nThough all required R-packages will be installed in the computer room\nprevious to this session, here there are instructions, in the case you\ntry to repeat the sessions in your own computer. Following command line\nshould be executed in order to install all required packages in\nR:\n\n\ninstall.packages(c(\"devtools\", \"foreign\", \"plotKML\", \"rgdal\", \"sp\", \"vegdata\",\n  \"vegan\", \"xlsx\"), dependencies=TRUE)\n\n\n\nThis session will focus on the use of two packages that use GitHub as repository for\nsharing and development. The package taxlist\nprocesses taxonomic lists that may be connected to biodiversity\ninformation (e.g. vegetation relevés), while the package vegtable has\na similar task but handling vegetation-plot records. Since\nvegtable is depending on taxlist, both\npackages should be installed and updated for this session:\n\n\nlibrary(remotes)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\", build_vignettes=TRUE)\n\n\n\nSince both package are been uploaded in the Comprehensive R Archive\nNetwork (CRAN), you can also use the common way to get the last released\nversion.\n\n\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n\n\nDocuments and data sets\nThis is the main document of the Workshop and will be distributed\namong its participants. Additionally, data sets required for the\nexamples are provided by the installation of the R-packages\ntaxlist and vegtable.\nIntroduction to taxlist\nThe package taxlist define an homonymous S4\nclass. Among other properties, S4 classes implement a\nformal definition of objects, tests for their validation and functions\n(methods) applied to them. Such properties are suitable for structure\ninformation of taxonomic lists and for data handling.\n\n\nlibrary(taxlist)\nshowClass(\"taxlist\")\n\n\n\nThis class is composed by four slots, corresponding to\ncolumn-oriented tables (class data.frame in\nR). While the slots taxonNames and\ntaxonRelations contain the information on names (labels of\ntaxon concepts) and taxon concepts, respectively, representing the core\ninformation of taxonomic lists.\nmost important information regarding taxa (taxon concepts),\ninformation in slots taxonTraits and\ntaxonViews is optional and they can be empty.\nBuilding taxlist objects\nBuilding taxlist objects can be achieved either through\na step-by-step routine working with small building blocks or by\nimporting consolidated data sets.\nUsing character vectors\nObjects of class taxlist can be just built from a list\nof names formatted as a character vector. To achieve it, the functions\nnew and add_concept are required.\n\n\nplants <- c(\"Lactuca sativa\",\"Solanum tuberosum\",\"Triticum sativum\")\nsplist <- new(\"taxlist\")\nsplist <- add_concept(splist, plants)\nsummary(splist)\n\n\n\nUsing formatted tables\nIn the case of consolidated species lists, they can be inserted in a\ntable previously formatted for taxlist (or\nTurboveg). Such tables can include both, accepted names\nfor plant species as well as their respective synonyms. A formatted\ntable is installed in the package taxlist.\n\n\nFile <- file.path(path.package(\"taxlist\"), \"cyperus\", \"names.csv\")\nCyperus <- read.csv(File, stringsAsFactors=FALSE)\nstr(Cyperus)\n\n\n\nThis table was originally imported form Turboveg and\ninherits some of its default columns. Four columns were renamed and are\nmandatory for process the table with the function\ndf2taxlist:\nTaxonUsageID is the key field of a table of names (slot\ntaxonNames).\nTaxonConceptID is the link of the name to its\nrespective concept (key field in slot taxonRelations.\nTaxonName is the name itself as character.\nAuthorName is a character value indicating the\nauthor(s) of the respective name.\nAdditionally the functions require a logical vector indicating, which\nof those names should be considered as synonyms or accepted names for\nits respective concept. This information is provided by the inverse\nvalue of the column SYNONYM in\nTurboveg.\n\n\nCyperus <- df2taxlist(Cyperus, !Cyperus$SYNONYM)\nsummary(Cyperus)\n\n\nobject size: 32.1 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 95 \nnumber of taxon concepts: 42 \ntrait entries: 0 \nnumber of trait variables: 0 \ntaxon views: 0 \n\nUsing Turboveg species list\nA direct import from a Turboveg database can be done\nusing the function tv2taxlist. The installation of\nvegtable includes data published by Fujiwara et\nal. (2014) with vegetation plots collected in forest stands\nfrom Kenya.\n\n\nlibrary(vegtable)\ntv_home <- file.path(path.package(\"vegtable\"), \"tv_data\")\nFujiwara <- tv2taxlist(\"Fujiwara_sp\", tv_home)\nsummary(Fujiwara)\n\n\n\nSummary displays\nFor taxlist objects there are basically two ways for\ndisplaying summaries. The first way is just ot apply the function\nsummary to a taxlist object:\n\n\nsummary(Cyperus)\n\n\nobject size: 32.1 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 95 \nnumber of taxon concepts: 42 \ntrait entries: 0 \nnumber of trait variables: 0 \ntaxon views: 0 \n\nNote that this option also executes a validity check of the object,\nas done by the function validObject.\nThe second way is getting information on a particular concept by\nadding it concept ID or a taxon usage name as second argument in the\nfunction.\n\n\nsummary(Cyperus, \"Cyperus dives\")\n\n\n------------------------------ \nconcept ID: 197 \nview ID: none \nlevel: none \nparent: none \n\n# accepted name: \n197 Cyperus dives Delile \n\n# synonyms (5): \n52000 Cyperus immensus C.B. Clarke \n52600 Cyperus exaltatus var. dives (Delile) C.B. Clarke \n52601 Cyperus alopecuroides var. dives Boeckeler \n52602 Cyperus immensus var. petherickii (C.B. Clarke) Kük. \n52603 Cyperus petherickii C.B. Clarke \n------------------------------\n\nSpecific information for several concepts can be displayed by using a\nvector with several concept IDs. Through the option\nConceptID=\"all\" it is also possible to get a display of the\nfirst concepts, depending on the value of the argument\nmaxsum.\n\n\nsummary(Cyperus, \"all\", maxsum=10)\n\n\n\nExample data set\nThe installation of taxlist includes the data\nEasplist, which is formatted as a taxlist\nobject. This data is a subset of the species list used by the database\nSWEA-Dataveg (GIVD ID\nAF-006):\n\n\ndata(Easplist)\nsummary(Easplist)\n\n\n\nAccess to slots\nThe common ways to access to the content of slots in S4\nobjects are either using the function slot(object, name) or\nthe symbol @ (i.e. object@name). Additional\nfunctions, which are specific for taxlist objects are\ntaxon_names, taxon_relations,\ntaxon_traits and taxon_views (see the help\ndocumentation).\nAdditionally, it is possible to use the methods $ and\n[ , the first for access to information in the slot\ntaxonTraits, while the second can be also used for other\nslots in the object.\n\n\nsummary(as.factor(Easplist$life_form))\n\n\n  acropleustophyte        chamaephyte     climbing_plant facultative_annual \n                 8                 25                 25                 20 \n   obligate_annual       phanerophyte   pleustohelophyte         reed_plant \n               114                 26                  8                 14 \n     reptant_plant      tussock_plant               NA's \n                19                 52               3576 \n\nSubsets\nMethods for the function subset are implemented in order\nto generate subsets of the content of taxlist objects. Such\nsubsets usually apply pattern matching (for character vectors) or\nlogical operations and are analogous to query building in relational\ndatabases. The subset method can be apply to any slot by\nsetting the value of the argument slot.\n\n\nPapyrus <- subset(Easplist, grepl(\"papyrus\", TaxonName), slot=\"names\")\nsummary(Papyrus, \"all\")\n\n\n\nOr the very same results:\n\n\nPapyrus <- subset(Easplist, TaxonConceptID == 206, slot=\"relations\")\nsummary(Papyrus, \"all\")\n\n\n\nSimilarly, you can look for a specific name.\n\n\nPhraaus <- subset(Easplist, charmatch(\"Phragmites australis\", TaxonName),\n  slot=\"names\")\nsummary(Phraaus, \"all\")\n\n\n\nParent-child relationships\nObjects belonging to the class taxlist can optionally\ncontent parent-child relationships and taxonomic levels. Such\ninformation is also included in the data Easplist, as shown\nin the summary output.\n\n\nsummary(Easplist)\n\n\nobject size: 761.4 Kb \nvalidation of 'taxlist' object: TRUE \n\nnumber of taxon usage names: 5393 \nnumber of taxon concepts: 3887 \ntrait entries: 311 \nnumber of trait variables: 1 \ntaxon views: 3 \n\nconcepts with parents: 3698 \nconcepts with children: 1343 \n\nhierarchical levels: form < variety < subspecies < species < complex < genus < family \nnumber of concepts in level form: 2\nnumber of concepts in level variety: 95\nnumber of concepts in level subspecies: 71\nnumber of concepts in level species: 2521\nnumber of concepts in level complex: 1\nnumber of concepts in level genus: 1011\nnumber of concepts in level family: 186\n\nNote that such information can get lost once applied\nsubset, since the respective parents or children from the\noriginal data set are not anymore in the subset. May you like to recover\nparents and children, you can use the functions get_paretns\nor get_children, respectively.\n\n\nsummary(Papyrus, \"all\")\n\n\n------------------------------ \nconcept ID: 206 \nview ID: 1 \nlevel: species \nparent: none \n\n# accepted name: \n206 Cyperus papyrus L. \n\n# synonyms (2): \n52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. \n52613 Cyperus papyrus ssp. nyassicus Chiov. \n------------------------------\n\nPapyrus <- get_parents(Easplist, Papyrus)\nsummary(Papyrus, \"all\")\n\n\n------------------------------ \nconcept ID: 206 \nview ID: 1 \nlevel: species \nparent: 54853 Cyperus L. \n\n# accepted name: \n206 Cyperus papyrus L. \n\n# synonyms (2): \n52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. \n52613 Cyperus papyrus ssp. nyassicus Chiov. \n------------------------------ \nconcept ID: 54853 \nview ID: 2 \nlevel: genus \nparent: 55959 Cyperaceae Juss. \n\n# accepted name: \n54855 Cyperus L. \n------------------------------ \nconcept ID: 55959 \nview ID: 3 \nlevel: family \nparent: none \n\n# accepted name: \n55961 Cyperaceae Juss. \n------------------------------\n\nIntroduction to vegtable\nObjects of class vegtable are complex objects attempting\nto handle the most important information contained in vegetation-plot\ndatabases. They are defined in the homonymous package, while the species\nlist will be required as a taxlist object.\nAs already mentioned, S4 objects are composed by\nslots:\n\n\nlibrary(vegtable)\nshowClass(\"vegtable\")\n\n\n\nThe information contained in the slot is the following:\ndescription is containing the “metadata” of the\ndatabase as a named character vector.\nsamples is a column oriented table with the\nobservations of species (as usage IDs) in plots and layers.\nheader is a table containing information on the\nplots.\nspecies is the taxonmic list as taxlist\nobject.\nrelations are tables linked to categorical variables in\nslot header (called popups in\nTurboveg).\ncoverconvert is a list with conversion tables among\ncover scales.\nBuilding vegtable objects\nAn empty object (prototype) can be generated by using the function\nnew:\n\n\nVeg <- new(\"vegtable\")\n\n\n\nIt is also possible to build an object from cross tables, assuming\nall species included in the table are accepted names:\n\n\nFile <- file.path(path.package(\"vegtable\"), \"Fujiwara_2014\", \"samples.csv\")\nFujiwara <- read.csv(File, check.names=FALSE, stringsAsFactors=FALSE)\nFujiwara_veg <-df2vegtable(Fujiwara, 1, 2)\nsummary(Fujiwara_veg)\n\n\n\nExample data set\nThe package vegtable also provides own data sets as\nexamples. One of those examples is dune_veg, which contains\nthe data sets dune and dune.env from the\npackage vegan.\n\n\ndata(dune_veg)\nsummary(dune_veg)\n\n\n\nOther example is Kenya_veg, which also represent a\nsubset of the database SWEA-Dataveg (GIVD ID\nAF-00-006).\n\n\ndata(Kenya_veg)\nsummary(Kenya_veg)\n\n\n## Metadata \n   db_name: Sweadataveg\n   sp_list: Easplist\n   dictionary: Swea\n   object size: 9501 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 1946 \n   plots with records: 1946 \n   variables in header: 34 \n   number of relations: 3 \n\n## Taxonomic List \n   taxon names: 3164 \n   taxon concepts: 2392 \n   validity: TRUE \n\nAs shown in the previous commands, the function summary\ndisplays a general overview of the object’s content, while it also runs\na validity check. An additional display is offered by the function\nvegtable_stat:\n\n\nvegtable_stat(Kenya_veg)\n\n\n## Metadata \n   db_name: Sweadataveg\n   sp_list: Easplist\n   dictionary: Swea\n   object size: 9501 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 1946 \n   plots with records: 1946 \n   variables in header: 34 \n   number of relations: 3 \n\n## Taxonomic List \n   taxon names: 3164 \n   taxon concepts: 2392 \n   validity: TRUE \n\nREFERENCES \nPrimary references: 5\n\n## AREA \nArea range (m^2): 150 - 1750\n<1 m^2: 0%\n1-<10 m^2: 0%\n10-<100 m^2: 0%\n100-<1000 m^2: 2%\n1000-<10000 m^2: 1%\n>=10000 m^2: 0%\nunknow: 97%\n\n## TIME \noldest: 1983 - youngest: 2014\n<=1919: 0%\n1920-1929: 0%\n1930-1939: 0%\n1940-1949: 0%\n1950-1959: 0%\n1960-1969: 0%\n1970-1979: 0%\n1980-1989: 36%\n1990-1999: 31%\n2000-2009: 2%\n2010-2019: 1%\nunknow: 30%\n\n## DISTRIBUTION \nKE: 100%\n\n## PERFORMANCE \n01: 83%\n02: 17%\n03: 0%\n04: 0%\n05: 0%\n06: 0%\n07: 0%\n08: 0%\n09: 0%\n10: 0%\n11: 0%\n12: 0%\n\nAccess to slots\nSome functions are provided for the access to slots of\nvegtable objects, namely header and\nveg_relation, taxon_traits and\ntaxon_views (see the help documentation).\nFor a direct access of the content included in slot\nheader, there are the methods $ and\n[:\n\n\nsummary(Kenya_veg$REFERENCE)\nveg_relation(Kenya_veg, \"REFERENCE\")[,1:3]\n\n\n\nSubsets\nAs a way to generate queries from vegtable objects, a\nmethod for the function subset is implemented as well.\nFollowing is the case of the data set dune_veg generating a\nsubset with pasture plots.\n\n\ndata(dune_veg)\npasture <- subset(dune_veg, Use == \"Pasture\")\nsummary(dune_veg)\n\n\n## Metadata \n   object size: 22.2 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 20 \n   plots with records: 20 \n   variables in header: 6 \n   number of relations: 0 \n\n## Taxonomic List \n   taxon names: 30 \n   taxon concepts: 30 \n   validity: TRUE \n\nsummary(pasture)\n\n\n## Metadata \n   object size: 19.4 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 5 \n   plots with records: 5 \n   variables in header: 6 \n   number of relations: 0 \n\n## Taxonomic List \n   taxon names: 30 \n   taxon concepts: 30 \n   validity: TRUE \n\nCross tables\nMost of the applications dealing with analysis of vegetation tables\n(e.g. the package vegan) will deal with cross tables rather\nthan with column-oriented database lists. Therefore a function\ncrosstable is defined for the conversion of\ntaxlist objects to cross tables. Before building a cross\ntable it will be recommended to transform the cover into percentage\nvalue by using the function transform.\n\n\npasture <- cover_trans(pasture, to=\"Cover\", rule=\"middle\")\n\nCross <- crosstable(Cover ~ ReleveID + AcceptedName, pasture, max,\n  na_to_zero=TRUE)\nCross\n\n\n\nThe first argument in the function is the formula\ny ~ x1 + x2 + ... + xn, where:\ny is the cover value (a column in slot\nsamples).\nx1 is the plot ID or a grouping value from slot\nheader which will be used as columns in the cross\ntable.\nx2 is the output for species (either\nTaxonName or AcceptedName).\nx3 to xn are additional information for\nthe rows, such as layer, etc.\nThe second argument is the vegtable object and the third\nis a function, which will be applied in the case of multiple values in a\ncell (e.g. multiple records of a species within a plot).\nNote that there is also a method dealing with class\ndata.frame (see the help documentation).\n\n\ndune_veg <- cover_trans(dune_veg, to=\"Cover\", rule=\"middle\")\n\nCross_use <- crosstable(Cover ~ Use + AcceptedName, dune_veg, sum,\n  na_to_zero=TRUE)\nCross_use\n\n\n\nWhile the previous commands show statistics of groups in a vegetation\ntable, it is also possible to write a presence-absence table:\n\n\nCross_pa <- crosstable(Cover ~ ReleveID + AcceptedName, pasture, function(x) 1,\n  na_to_zero=TRUE)\nCross_pa\n\n\n\nImport from Turboveg\nThe original task of vegtable was the import of\nTurboveg databases in R. Thus one of the oldest\nfunctions in the package is tv2vegtable.\n\n\ntv_home <- file.path(path.package(\"vegtable\"), \"tv_data\")\nFujiwara <- tv2vegtable(\"Fujiwara_2014\", tv_home)\n\n\nzero values will be replaced by NAs \n\nsummary(Fujiwara)\n\n\n## Metadata \n   db_name: Fujiwara_2014\n   sp_list: Fujiwara_sp\n   dictionary: Swea\n   object size: 392.8 Kb \n   validity: TRUE \n\n## Content \n   number of plots: 56 \n   plots with records: 56 \n   variables in header: 29 \n   number of relations: 2 \n\n## Taxonomic List \n   taxon names: 301 \n   taxon concepts: 254 \n   validity: TRUE \n\nScreenshot of Kenyan data set displayed\nin TurbovegIn the case there is an error message produced by inconsistent data\nstructure, there is the possibility of importing the data as a list for\nfurther inspection.\n\n\nFujiwara_list <- tv2vegtable(\"Fujiwara_2014\", tv_home, output=\"list\")\n\n\n\nExport to Juice\nExport of data for Juice follows a similar procedure\nas for cross tables.\n\n\nwrite_juice(Fujiwara, \"RiftValley\",\n  COVER_CODE ~ ReleveID + AcceptedName + LAYER,\n  header=c(\"TABLE_NR\",\"NR_IN_TAB\",\"ALTITUDE\",\"INCLINATIO\",\"EXPOSITION\",\n    \"COMM_TYPE\"),\n  FUN=paste0)\n\n\n\nBesides the vegtable object, the most important elements\nto export are:\nformula indicating how to construct the cross\ntable.\nheader to show which variables should be exported for\nthe head data.\ncoords with the names of coordinates, if present.\nFUN the function used for aggregate multiple\nrecords.\nThe values for coords should be as decimal degrees and\nin the spatial system WGS 84. In Juice such information\nwill be included in the header data as columns deg_lon\nand deg_lat, allowing the display of plots in\nGoogle Earth. The previous command has generated two\nfiles, namely RiftValley_table.txt and\nRiftValley_header.txt.\nFor importing the table, you may follow the steps:\nOpen Juice\nIn menu\nFile -> Import -> Table -> From Spreadsheet File (e.g. EXCEL Table)\nBrowse to RiftValley_table.txt and\nOpen\nIn the last step, select the option\nBraun-Blanquet Codes and Finish\nFinally, save the new file\nThe Kenyan data set displayed in\nJuiceNow for the head:\nIn menu\nFile -> Import -> Header Data -> From Comma Delimited File\nBrowse to RiftValley_header.txt and\nOpen\nDisplay of header data in\nJuiceMap in leaflet\nFor geo-referenced plots, you can easily map the location of the\nplots, for instance using the package leaflet.\n\n\nlibrary(leaflet)\nleaflet(Fujiwara@header) %>%\n    addTiles() %>%\n    addCircleMarkers(lng=~LONGITUDE, lat=~LATITUDE, color=\"red\",\n        opacity=0.5, radius=2)\n\n\n\n\nThen, hopefully you enjoyed the session and did not get too much\nerror messages.\nUpdated on\n06-06-2022\nAknowledgements\nThis workshop was supported by the project GlobE-wetlands.\n\n\n\n",
    "preview": "posts/vegtable-intro/images/Juice_table.png",
<<<<<<< HEAD
    "last_modified": "2022-06-06T21:36:39+02:00",
=======
    "last_modified": "2022-06-06T19:38:12+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {},
    "preview_width": 1050,
    "preview_height": 824
  },
  {
    "path": "posts/vegtable-press/",
    "title": "vegtable: An R object for vegetation-plot data sets",
    "description": "The package vegtable defines the homonymous object class and functions\n(methods) for handling vegetation-plot data sets in R.\nWithin its slots, taxonomic lists are formatted as taxlist objects.\nThis is a brief account about a presentation of vegtable and taxlist at the\nMarsaryk University in Brno (Czech Republic).\nThe presentation includes a brief introduction to the structure of vegtable\nobjects and functions.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-29",
    "categories": [
      "R",
      "vegetation"
    ],
<<<<<<< HEAD
    "contents": "\nThis was a presentation about the basics of the packages vegtable and\ntaxlist.\nThese packages can be installed either from CRAN\n(last release) or GitHub (last development\nversion).\n\n\n## Installing from CRAN\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n## Installing from GitHub\nlibrary(remotes)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\")\n\n\n\nThe vignette installed for taxlist can be opened by\ncalling it at the R-console.\n\n\nlibrary(taxlist)\n\nvignette(\"taxlist-intro\")\n\n\n\nFor additional information, visit the respective pages inserted as\nhypertext at the beginning of this post.\n\n\n\n\n\n",
    "preview": "posts/vegtable-press/images/brno_vegtable_slide2.png",
    "last_modified": "2022-06-06T21:40:54+02:00",
=======
    "contents": "\nThis was a presentation about the basics of the packages vegtable and taxlist.\nThese packages can be installed either from CRAN (last release) or GitHub (last development version).\n\n\n## Installing from CRAN\ninstall.packages(\"vegtable\", dependencies=TRUE)\n\n## Installing from GitHub\nlibrary(remotes)\ninstall_github(\"ropensci/taxlist\", build_vignettes=TRUE)\ninstall_github(\"kamapu/vegtable\")\n\n\n\nThe vignette installed for taxlist can be opened by calling it at the R-console.\n\n\nlibrary(taxlist)\n\nvignette(\"taxlist-intro\")\n\n\n\nFor additional information, visit the respective pages inserted as hypertext at the beginning of this post.\n \n\n\n\n",
    "preview": "posts/2020-10-29-vegtablepress/images/brno_vegtable_slide2.png",
    "last_modified": "2022-06-06T19:38:11+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {},
    "preview_width": 629,
    "preview_height": 354
  },
  {
    "path": "posts/sudamerica/",
    "title": "sudamerica: A vegetation-plot database for the Neo-Tropics",
    "description": "A database initiated for relevés in temperate grasslands in Chile but\ncurrently open for all the American continent with a strong focus in South\nAmerica.\nThis database attempt to store published relevés for meta-analysis purposes.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-13",
    "categories": [
      "database",
      "vegetation"
    ],
    "contents": "\nThe database sudamerica is formatted in PostgreSQL, including the extension PostGIS. sudamerica contains currently records from 1,642 plot observations obtained from 34 sources, most of them published either as journal articles or monographs. The oldest record was done in 12-01-1966, while the newest record is from 25-11-2013.\n \n\n\n\nThis database is maintained for research and teaching purposes. Data may be shared after a respective agreement with the custodian. Both, database and respective data sources may be cited in the case that information obtained from them get published. For data exchange (after a respective agreement with the custodian), objects of class vegtable will be preferred.\nSpecial thanks to Javier Amigo and Federico Luebert for providing own digitized data to this data base. Several students contributed by digitizing tables in the context of short-term assistance. The reference section below contains all publications used as data sources for sudamerica.\n\n\n\nAckermann, Markus. 2001. “Die Vegetation Der Bachfläufe in Der Hochatacama (Ii. Region) in Chile.” Candidate thesis, Philipps-Universität Marburg.\n\n\nAlvarez, Miguel. 2008. Diasporenbank Und ökologie Der Vegetation Temporärer Gewässer Im Cholchol-Gebiet (9. Region, Chile). Dissertationes Botanicae 407. Berlin: J. Cramer.\n\n\nAlvarez, Miguel, and Ulrich Deil. 2015. “Vascular Plant Assemblages of Ephemeral Wetland Vegetation Along the Mediterranean-Temperate Gradient in Chile.” Gayana Botánica 72 (2): 350–66.\n\n\nAlvarez, Miguel, Carlos Ramírez, Heriberto Figueroa, and Cristina San Martín. 2006. “Seed Banks in an Inundation Gradient of Two Grasslands in the 10\\(^{th}\\) Region (Chile) and Their Relationship with the Plant Cover.” Feddes Repertorium 117 (7-8): 571–86.\n\n\nAlvarez, Miguel, Cristina San Martín, Carla Novoa, Gisela Toledo, and Carlos Ramírez. 2010. “Diversidad Florística, Vegetacional Y de Hábitats En El Archipiélago de Los Chonos (Región de Aisén, Chile).” Anales Instituto Patagonia 38 (1): 35–56.\n\n\nAmigo, Javier, and Lorena Flores-Toro. 2012a. “Revisión Sintaxonómica de Los Bosques Esclerófilos de Chile Central: La Alianza Cryptocaryon Albae.” Lazaroa 33: 171–96. https://doi.org/10.5209/rev_laza.2012.v33.40283.\n\n\n———. 2012b. “The Supramediterranean Scrub in the Central Chilean Province: Phytosociological Position.” International Journal of Geobotanical Research 2: 87–110.\n\n\n———. 2013. “A New Contribution to Syntaxonomy of Sclerophyllous Forests and Pre-Forests of Central Chile: Lithraeion Causticae Alliance.” International Journal of Geobotanical Research 3: 47–67.\n\n\nAmigo, Javier, Carlos Ramírez, and Luis G. Quintanilla. 2007. “Mantle Communities of the Temperate Woodlands of South Central Chile: A Phytosociological Study of the Order Aristotelietalia Chilensis.” Phytocoenologia 37 (2): 269–319. https://doi.org/10.1127/0340-269x/2007/0037-0269.\n\n\nAmigo, Javier, Carlos Ramírez, and Luis G Quintanilla. 2004. “The Nothofagus Nitida (Phil.) Krasser Woodlands of Southern Chile in the Northern Half of Their Range: Phytosociological Position.” Acta Botanica Gallica 151 (1): 3–31.\n\n\nAmigo, Javier, and Manuel A. Rodríguez-Guitián. 2015. “Syntaxonomical Review of Sub-Antarctic Orotemperate Forests (Adenocaulo Chilensis-Nothofagetalia Pumilionis) in the Valdivian Biogeographic Province.” International Journal of Geobotanical Research 5: 13–35.\n\n\nAmigo, Javier, Manuel A. Rodríguez Guitián, and Carlos Ramírez. 2010. “The Lleuque Forests of South Central Chile: A Phytosociological Study and Syntaxonomical Classification Within South American Temperate Forests.” Lazaroa 31: 85–98.\n\n\nAmigo, Javier, José San Martín, and Luis García Quintanilla. 2000. “Estudio Fitosociológico de Los Bosques de Nothofagus Glauca (Phil.) Krasser Del Centro-Sur de Chile.” Phytocoenologia 30 (2): 193–221.\n\n\nAñazco, Nancy, Marcela Moraga, and Carlos Ramírez. 1981. “Distribución de Comunidades Pratenses Antropogénicas En Un Gradiente de Inclinación En Valdivia, Chile.” Agro Sur 9 (1): 14–27.\n\n\nDeil, Ulrich, Miguel Alvarez, and Inge Paulini. 2007. “Native and Non-Native Species in Annual Grassland Vegetation in Mediterranean Chile.” Phytocoenologia 37 (3-4): 769–84. https://doi.org/10.1127/0340-269x/2007/0037-0769.\n\n\nGutte, Peter. 1988. “Zu Einigen Wasserpflanzen- Und Röhrichtgesellschaften in Den Hochanden Zentralperus.” In Plantae Neotropicae, edited by Gerd K Müller, Peter Gutte, C Müller, and D L Schulz, 45–48. Leipzig: Karl-Marx-Universität.\n\n\nHauenstein, Enrique, Marcos González, Fernando Peña-Cortés, and Andrés Muñoz-Pedreros. 2002. “Clasificación Y Caracterización de La Flora Y Vegetación de Los Humedales de La Costa de Toltén (IX Región, Chile).” Gayana Botánica 59 (2): 87–100.\n\n\nMontaldo, Patricio. 1975. “Sinecología de Las Praderas Antropogénicas En La Provincia de Valdivia, Chile.” Agro Sur 3 (1): 16–24.\n\n\nRamírez, Carlos. 1968. “Die Vegetation Der Moore Der Cordillera Pelada, Chile.” Bericht Der Oberhessischen Gesellschaft Für Natur- Und Heilkunde Zu Gießen, Naturwissenschaftliche Abteilung 36: 95–101.\n\n\nRamírez, Carlos, Javier Amigo, and Cristina San Martín. 2003. “Vegetación Pratense Litoral Y Dinámica Vegetacional Antropogénica En Valdivia, Chile.” Agro Sur 31 (2): 24–37.\n\n\nRamírez, Carlos, Achim Ellies, Roberto Mac Donald, and Oscar Seguel. 2003. “Cambios En La Flora Y La Materia Orgánica Desde Bosques Nativos a Praderas Antropogénicas En Suelos Volcánicos de La IX Región de Chile.” Revista de La Ciencia Del Suelo Y Nutrición Vegetal 3 (1): 1–12.\n\n\nRamírez, Carlos, Heriberto Figueroa, and Cristina San Martín. 1989. “Cambios Estacionales de Frecuencia Y Cobertura En Una Pradera Del Centro-Sur de Chile.” Agro Sur 17 (2): 105–15.\n\n\nRamírez, Carlos, Ingrid Ortiz, Cristina San Martín, Osvaldo J Vidal, Miguel Alvarez, Yéssica Pérez, José Luis Solís, and Iván Alvarez. 2014. “Estudio Preliminar de La Biodiversidad Vegetal Terrestre En El Estero Walker (Región de Aysén, Chile): Utilizando Líneas Base de Proyectos de Inversión.” Gayana Botánica 71 (2): 227–45.\n\n\nRamírez, Carlos, and Magaly Riveros. 1975. “Contenido de Semillas En El Suelo Y Regeneración de La Cubierta Vegetal En Una Pradera de La Provincia de Valdivia, Chile.” Phyton 33 (1): 81–96.\n\n\nRamírez, Carlos, Cristina San Martín, Domingo Contreras, and José San Martín. 1994. “Estudio Fitosociológico de La Vegetación Pratense Del Valle Del Río Chol-Chol (Cautín, Chile).” Agro Sur 22 (1): 41–56.\n\n\nRamírez, Carlos, Cristina San Martín, Achim Ellies, and Roberto Mac Donald. 1997. “Cambios Florísticos, Fitosociológicos Y Edáficos Provocados Por Exclusión de Pastoreo En Una Pradera Valdiviana, Chile.” Agro Sur 24 (2): 180–95.\n\n\nRamírez, Carlos, Cristina San Martín, Juan Carlos Ramírez, and José San Martín. 1992. “Estudio Sinecológico de Las Praderas Del Valle Del Curso Inferior Del Río Imperial (Cautín, Chile).” Ciencia E Investigación Agraria 19 (3): 97–112.\n\n\nRamírez, Carlos, Cristina San Martín, Osvaldo J Vidal, Yéssica Pérez, Jorge Valenzuela, José Luis Solís, and Gisela Toledo. 2014. “Tundra Subantártica En La Isla Grande de Chiloé, Chile: Flora Y Vegetación Turbosa de Campañas.” Anales Instituto Patagonia 42 (2): 17–37.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Miguel Alvarez. 2004. “Estudio de La Vegetación de \"Mallines\" Y \"Campañas\" En La Cordillera Pelada (Valdivia, Chile).” Revista Geográfica de Valparaíso 35: 261–73.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Heriberto Figueroa. 1999. “Análisis Multivariable de La Vegetación de Un Complejo de Turberas En Cordillera Pelada (Valdivia, Chile).” Lazaroa 20: 95–106.\n\n\nSan Martín, Cristina, Carlos Ramírez, and Pedro Ojeda. 1998. “La Vegetación de Lagunas Primaverales En Las Cercanías de Temuco (Cautín, Chile).” Acta Bot Malacitana 23: 99–120.\n\n\nSchwaar, Jürgen. 1976. “Die Hochmoore Feuerlands Und Ihre Pflanzengesellschaften.” Telma 6: 51–59.\n\n\n———. 1981. “Amphi-Arktische Pflanzengesellschaften in Feuerland.” Phytocoenologia 9 (4): 547–72.\n\n\nTeneb, Ernesto, Patricia Gómez, and Mariela González. 2008. “Observaciones Sobre La Flora Y Vegetación de Dos Turberas En La Región de Aisén, Patagonia Chilena.” Gayana Bot 65 (2): 229–32.\n\n\n\n\n",
    "preview": "posts/sudamerica/images/guadal_chile.jpg",
<<<<<<< HEAD
    "last_modified": "2021-11-05T09:26:09+01:00",
=======
    "last_modified": "2022-06-06T19:38:12+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {}
  },
  {
    "path": "posts/sweadataveg/",
    "title": "SWEA-Dataveg: A vegetation-plot database for Africa",
    "description": "A collection of vegetation-plots from Africa, originally focused on wetland\nvegetation from Eastern Africa, it is currently expanded to other areas\nand considering any kind of vegetation.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-13",
    "categories": [
      "database",
      "vegetation"
    ],
    "contents": "\nVegetation-plot data from Eastern Africa and abroad\n \n\n\n\nThe database SWEA-Dataveg is formatted in PostgreSQL, including the extension PostGIS. For data exchange (after a respective agreement with the custodian), objects of class vegtable will be preferred.\nSWEA-Dataveg contains currently records from 5,552 plot observations that are provided by 47 sources. Most of those sources are works published either as journal articles or monographs.\nThe oldest record was done in 07-07-1937, while the newest record is from 17-02-2020.\n\n\n\n\n\n\n",
    "preview": "posts/sweadataveg/images/wetland_tz.jpg",
<<<<<<< HEAD
    "last_modified": "2021-11-05T09:26:11+01:00",
=======
    "last_modified": "2022-06-06T19:38:12+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {}
  },
  {
    "path": "posts/taxlist-journey/",
    "title": "A journey in rOpenSci",
    "description": "A brief account of the experiences gained after a bit more than 2 years review\nprocess of the package taxlist for its submission to rOpenSci.\nThis journey resulted on new tools learned and new friends.\nThe talk was presented at LatinR 2020 (virtual meeting).",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2020-10-08",
    "categories": [
      "conference",
      "R"
    ],
<<<<<<< HEAD
    "contents": "\nAfter a long review process, where a lot of improvements have been\nimplemented, the package taxlist\nmanaged to be accepted in rOpenSci. The package\ntaxllist handles taxonomic lists as S4\nobjects in R.\nSuch objects can be used as modules within data sets of biodiversity\nrecords as in the package vegtable.\nIn a brief talk a summary of the experiences during the process of\nsubmission to rOpenSci was presented in the context of\nthe conference LatinR\n2020. Here you can access to the slides and\nthe video of\nthe presentation.\n\n\n\n\n\n",
    "preview": "posts/taxlist-journey/images/cover_video.png",
    "last_modified": "2022-06-06T22:23:24+02:00",
=======
    "contents": "\nAfter a long review process, where a lot of improvements have been implemented, the package taxlist managed to be accepted in rOpenSci. The package taxllist handles taxonomic lists as S4 objects in R. Such objects can be used as modules within data sets of biodiversity records as in the package vegtable.\nIn a brief talk a summary of the experiences during the process of submission to rOpenSci was presented in the context of the conference LatinR 2020. Here you can access to the slides and the video of the presentation.\n \n\n\n\n",
    "preview": "posts/2020-10-08-taxlistjourney/images/cover_video.png",
    "last_modified": "2022-06-06T19:38:11+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {},
    "preview_width": 749,
    "preview_height": 419
  },
  {
    "path": "posts/r4africa/",
    "title": "R for AfRica",
    "description": "The proliferation of freeware and open source applications expands the\npotential of scientists, especially in countries of difficult access to\ncommercial licenses for software tools.\nIn the context of enhanced international networks between education and\nresearch institutions, training on use of freeware is becoming a crucial step\nfor a better balance in collaboration between European and Eastern African\ncountries, harmonizing the capacities among researchers and students.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      },
      {
        "name": "Bisrat H. Gebrekhidan",
        "url": {}
      },
      {
        "name": "Samuel Kiboi",
        "url": {}
      }
    ],
    "date": "2020-05-13",
    "categories": [
      "R",
      "workshop"
    ],
    "contents": "\n\n\n\n",
<<<<<<< HEAD
    "preview": "posts/r4africa/images/bisrat_teaching.jpg",
    "last_modified": "2022-06-06T22:23:02+02:00",
=======
    "preview": "posts/2020-05-13-r4africa/images/bisrat_teaching.jpg",
    "last_modified": "2022-06-06T19:38:11+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {}
  },
  {
    "path": "posts/wetlands-front/",
    "title": "Tanzanian wetlands in the cover of Phytocoenologia",
    "description": "A publication on classification of East African wetland communities in the\ncontext of the Braun-Blanquet approach managed to the cover of the journal\nPhytocoenologia.",
    "author": [
      {
        "name": "Miguel Alvarez",
        "url": "https://kamapu.github.io/"
      }
    ],
    "date": "2017-12-01",
    "categories": [
      "vegetation",
      "wetlands"
    ],
<<<<<<< HEAD
    "contents": "\nAfter a long process of learning, storing data, collecting\npublications and analysing data, the work entitled Classification of\naquatic and semi-aquatic vegetation in two East African sites: Cocktail\ndefinitions and syntaxonomy (Alvarez 2017)\nappeared in the volume 47 of the journal\nPhytocoenologia. This article assesses vegetation-plots\nfrom two localities (one Tanzanian site and one Kenyan site) with a\nsupervised classification method (Cocktail) and includes an exhaustive\nreview on previous syntaxonomical works. One of the localities (Kwasunga\nin Tanzania) appears in the cover page of the issue. Wetland ecosystems\nare important providers of services for the people and fulfil essential\necological functions. Syntaxonomic classifications according to species\ncomposition and ecological preferences are useful references for\nmonitoring of integrity and to assess the importance of wetlands for\nconservation purposes.\n\n\nAlthough in this article I am the only author, I was not alone in the\njourney. I have to thank Ulrich Deil (University of\nFreiburg, Germany) for allowing me to access his personal library,\nMilan Chytrý (University of Brno, Czech Republic) for\nmentoring me on the hard way of doing Cocktail, and to Jan\nRoleček (Czech Academy of Sciences, Czech Republic) for his\nsupport as editor. I also have to thank to two anonymous reviewers of\nthe manuscript and all Kenyan and Tanzanian colleagues that supported me\nduring the field activities.\n\n\n\n",
    "preview": "posts/wetlands-front/images/cover_cropped.jpg",
    "last_modified": "2022-06-06T21:42:01+02:00",
=======
    "contents": "\nAfter a long process of learning, storing data, collecting publications and analysing data, the work entitled Classification of aquatic and semi-aquatic vegetation in two East African sites: Cocktail definitions and syntaxonomy (Alvarez 2017) appeared in the volume 47 of the journal Phytocoenologia. This article assesses vegetation-plots from two localities (one Tanzanian site and one Kenyan site) with a supervised classification method (Cocktail) and includes an exhaustive review on previous syntaxonomical works. One of the localities (Kwasunga in Tanzania) appears in the cover page of the issue. Wetland ecosystems are important providers of services for the people and fulfil essential ecological functions. Syntaxonomic classifications according to species composition and ecological preferences are useful references for monitoring of integrity and to assess the importance of wetlands for conservation purposes.\n \nAlthough in this article I am the only author, I was not alone in the journey. I have to thank Ulrich Deil (University of Freiburg, Germany) for allowing me to access his personal library, Milan Chytrý (University of Brno, Czech Republic) for mentoring me on the hard way of doing Cocktail, and to Jan Roleček (Czech Academy of Sciences, Czech Republic) for his support as editor. I also have to thank to two anonymous reviewers of the manuscript and all Kenyan and Tanzanian colleagues that supported me during the field activities.\n\n\n\n",
    "preview": "posts/2017-12-01-wetlandsfront/images/cover_cropped.jpg",
    "last_modified": "2022-06-06T19:38:11+00:00",
>>>>>>> branch 'master' of https://github.com/kamapu/kamapu.github.io.git
    "input_file": {}
  }
]
